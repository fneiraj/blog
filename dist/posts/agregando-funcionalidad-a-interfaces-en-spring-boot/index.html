<!DOCTYPE html><html lang="es" class="scroll-smooth"><head><meta charset="UTF-8"><style>:where(img){height:auto}</style><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://mac.local.fneira.dev/posts/agregando-funcionalidad-a-interfaces-en-spring-boot/"><meta name="generator" content="Astro v4.3.5"><!-- General Meta Tags --><title>Agregando funcionalidad a interfaces con springboot | fneira.dev</title><meta name="title" content="Agregando funcionalidad a interfaces con springboot | fneira.dev"><meta name="description" content="Como agregar funcionalidad a interfaces mediante proxy en spring boot"><meta name="author" content="Fernando Neira"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:title" content="Agregando funcionalidad a interfaces con springboot | fneira.dev"><meta property="og:description" content="Como agregar funcionalidad a interfaces mediante proxy en spring boot"><meta property="og:url" content="https://mac.local.fneira.dev/posts/agregando-funcionalidad-a-interfaces-en-spring-boot/"><meta property="og:image" content="https://mac.local.fneira.dev/posts/agregando-funcionalidad-a-interfaces-en-spring-boot.png"><!-- Article Published/Modified time --><meta property="article:published_time" content="2024-02-03T15:22:00.000Z"><meta property="article:modified_time" content="2024-02-04T09:12:47.400Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://mac.local.fneira.dev/posts/agregando-funcionalidad-a-interfaces-en-spring-boot/"><meta property="twitter:title" content="Agregando funcionalidad a interfaces con springboot | fneira.dev"><meta property="twitter:description" content="Como agregar funcionalidad a interfaces mediante proxy en spring boot"><meta property="twitter:image" content="https://mac.local.fneira.dev/posts/agregando-funcionalidad-a-interfaces-en-spring-boot.png"><meta name="theme-color" content=""><!-- Google JSON-LD Structured data --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Agregando funcionalidad a interfaces con springboot | fneira.dev","image":"https://mac.local.fneira.dev/posts/agregando-funcionalidad-a-interfaces-en-spring-boot.png","datePublished":"2024-02-03T15:22:00.000Z}","dateModified":"2024-02-04T09:12:47.400Z","author":[{"@type":"Person","name":"Fernando Neira","url":"https://mac.local.fneira.dev"}]}</script><link rel="preload" href="/" as="font" crossorigin="" type="font/woff2"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><!--<script src="https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js"></script>--><script src="/toggle-theme.js"></script><link rel="stylesheet" href="/_astro/hoisted.t6kTncZ-.css">
<link rel="stylesheet" href="/_astro/index.4aP4EAL8.css">
<style>.active:where(.astro-maxqm4li){border-left-width:2px;--tw-border-opacity: 1;border-color:rgb(14 165 233 / var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(3 105 161 / var(--tw-text-opacity))}:is(.dark .active):where(.astro-maxqm4li){--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(14 165 233 / var(--tw-text-opacity))}
@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><script type="module" src="/_astro/hoisted.EeSBnziB.js"></script><style>[data-astro-transition-scope=astro-ktw3p6u4-1]{view-transition-name:agregando-funcionalidad-a-interfaces-con-springboot}@layer astro{::view-transition-old(agregando-funcionalidad-a-interfaces-con-springboot){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}::view-transition-new(agregando-funcionalidad-a-interfaces-con-springboot){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-old(agregando-funcionalidad-a-interfaces-con-springboot){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-new(agregando-funcionalidad-a-interfaces-con-springboot){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-ktw3p6u4-1],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-ktw3p6u4-1]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-ktw3p6u4-1],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-ktw3p6u4-1]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-ktw3p6u4-1],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-ktw3p6u4-1]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-ktw3p6u4-1],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-ktw3p6u4-1]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}</style><style>[data-astro-transition-scope=astro-lfnnksbi-2]{view-transition-name:agregando-funcionalidad-a-interfaces-con-springboot-date}@layer astro{::view-transition-old(agregando-funcionalidad-a-interfaces-con-springboot-date){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}::view-transition-new(agregando-funcionalidad-a-interfaces-con-springboot-date){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-old(agregando-funcionalidad-a-interfaces-con-springboot-date){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-new(agregando-funcionalidad-a-interfaces-con-springboot-date){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-lfnnksbi-2],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-lfnnksbi-2]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-lfnnksbi-2],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-lfnnksbi-2]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-lfnnksbi-2],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-lfnnksbi-2]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-lfnnksbi-2],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-lfnnksbi-2]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}</style><style>[data-astro-transition-scope=astro-sbgleo33-3]{view-transition-name:springboot}@layer astro{::view-transition-old(springboot){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}::view-transition-new(springboot){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-old(springboot){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-new(springboot){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-sbgleo33-3],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-sbgleo33-3]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-sbgleo33-3],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-sbgleo33-3]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-sbgleo33-3],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-sbgleo33-3]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-sbgleo33-3],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-sbgleo33-3]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}</style><style>[data-astro-transition-scope=astro-sbgleo33-4]{view-transition-name:cglib}@layer astro{::view-transition-old(cglib){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}::view-transition-new(cglib){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-old(cglib){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-new(cglib){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-sbgleo33-4],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-sbgleo33-4]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-sbgleo33-4],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-sbgleo33-4]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-sbgleo33-4],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-sbgleo33-4]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-sbgleo33-4],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-sbgleo33-4]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}</style><style>[data-astro-transition-scope=astro-sbgleo33-5]{view-transition-name:java}@layer astro{::view-transition-old(java){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}::view-transition-new(java){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-old(java){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-new(java){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-sbgleo33-5],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-sbgleo33-5]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-sbgleo33-5],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-sbgleo33-5]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-sbgleo33-5],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-sbgleo33-5]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-sbgleo33-5],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-sbgleo33-5]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}</style><style>[data-astro-transition-scope=astro-sbgleo33-6]{view-transition-name:proxy}@layer astro{::view-transition-old(proxy){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}::view-transition-new(proxy){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-old(proxy){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-new(proxy){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-sbgleo33-6],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-sbgleo33-6]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-sbgleo33-6],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-sbgleo33-6]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-sbgleo33-6],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-sbgleo33-6]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-sbgleo33-6],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-sbgleo33-6]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}</style></head> <body class="antialiased bg-white dark:bg-gray-950 dark:text-white text-black"> <header class="astro-pwmmw5ba bg-gray-300 dark:bg-gray-900 py-4 sticky top-0 z-10"> <div class="flex items-center astro-pwmmw5ba justify-between max-w-3xl mx-auto px-4 sm:px-6 xl:max-w-7xl"> <div class="astro-pwmmw5ba"> <a href="/" aria-label="fneira.dev" title="Ir al inicio" class="astro-pwmmw5ba"> <div class="flex items-center astro-pwmmw5ba justify-between dark:text-primary-color-dark font-semibold hover:text-primary-500 text-primary-color text-xl truncate"> <span class="astro-pwmmw5ba mr-1">~$ </span> <span class="astro-pwmmw5ba">fneira.dev</span> </div> </a> </div> <div class="flex items-center astro-pwmmw5ba leading-5 sm:space-x-6 space-x-4"> <a href="/blog" class="dark:text-gray-100 text-gray-900 astro-pwmmw5ba active dark:hover:bg-opacity-10 font-medium hidden hover:bg-gray-100 rounded-xl sm:block sm:p-4"> Blog </a><a href="/snippets" class="dark:text-gray-100 text-gray-900 astro-pwmmw5ba active dark:hover:bg-opacity-10 font-medium hidden hover:bg-gray-100 rounded-xl sm:block sm:p-4"> Snippets </a><a href="/projects" class="dark:text-gray-100 text-gray-900 astro-pwmmw5ba active dark:hover:bg-opacity-10 font-medium hidden hover:bg-gray-100 rounded-xl sm:block sm:p-4"> Proyectos </a> <button id="search-btn" aria-label="Search" class="dark:text-gray-100 astro-pwmmw5ba dark:hover:bg-opacity-10 hidden hover:bg-gray-100 rounded-xl sm:block sm:p-4"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="dark:text-gray-100 text-gray-900 astro-pwmmw5ba h-6 w-6" data-icon="search">  <symbol id="ai:local:search"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="{1.5}" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"></path></symbol><use xlink:href="#ai:local:search"></use>  </svg> </button> <button id="theme-btn" aria-label="Toggle Dark Mode" class="dark:text-gray-100 hidden rounded-xl hover:bg-gray-100 dark:hover:bg-opacity-10 sm:block sm:p-4"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="dark:text-gray-100 text-gray-900 h-6 w-6"> <path id="light-icon" fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path> <path id="dark-icon" d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path> </svg> </button> <button id="openNav" aria-label="Open Menu" class="sm:hidden"> <svg width="1em" height="1em" viewBox="0 0 20 20" class="dark:text-gray-100 text-gray-900 h-8 w-8" data-icon="menu">  <symbol id="ai:local:menu"><path fill="currentColor" fill-rule="evenodd" d="M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1m0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1m0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:menu"></use>  </svg> </button> <div id="nav-menu" class="ease-in-out bg-white dark:bg-gray-950 dark:opacity-[0.98] duration-300 fixed h-full left-0 opacity-95 top-0 transform translate-x-full w-full z-10"> <div class="flex justify-end"> <button id="closeNav" class="mr-8 mt-11" aria-label="Close Menu"> <svg width="1em" height="1em" viewBox="0 0 20 20" class="dark:text-gray-100 text-gray-900 h-8 w-8" data-icon="x">  <symbol id="ai:local:x"><path fill="currentColor" fill-rule="evenodd" d="M4.293 4.293a1 1 0 0 1 1.414 0L10 8.586l4.293-4.293a1 1 0 1 1 1.414 1.414L11.414 10l4.293 4.293a1 1 0 0 1-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 0 1-1.414-1.414L8.586 10 4.293 5.707a1 1 0 0 1 0-1.414" clip-rule="evenodd"></path></symbol><use xlink:href="#ai:local:x"></use>  </svg> </button> </div> <nav class="fixed h-full mt-8"> <div class="py-4 px-12"> <a href="/" class="dark:text-gray-100 text-gray-900 font-bold text-2xl tracking-widest"> Inicio </a> </div><div class="py-4 px-12"> <a href="/blog" class="dark:text-gray-100 text-gray-900 font-bold text-2xl tracking-widest"> Blog </a> </div><div class="py-4 px-12"> <a href="/snippets" class="dark:text-gray-100 text-gray-900 font-bold text-2xl tracking-widest"> Snippets </a> </div><div class="py-4 px-12"> <a href="/projects" class="dark:text-gray-100 text-gray-900 font-bold text-2xl tracking-widest"> Proyectos </a> </div> <div class="py-4 px-12"> <button id="mobile-search-btn" class="dark:text-gray-100 text-gray-900 font-bold text-2xl tracking-widest">
Buscar
</button> </div> </nav> </div>  </div> </div> </header> <div id="docsearch" class="astro-pwmmw5ba"></div>   <div id="main_content" class="mx-auto px-4 sm:px-6 max-w-3xl xl:max-w-7xl xl:px-0"> <div class="flex flex-col font-sans h-fit justify-between"> <main class="pt-6 mb-auto">  <section class="mx-auto px-4 sm:px-6 xl:px-0 max-w-34xl xl:max-w-9xl"> <div id="scroll-top-and-comments" class="fixed bottom-8 flex-col gap-3 hidden right-8"> <button id="scroll-to-comment" aria-label="Scroll To Comment" class="text-gray-500 dark:text-gray-400 bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 hover:bg-gray-300 p-2 rounded-full transition-all"> <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path> </svg> </button> <button id="scroll-to-top" aria-label="Scroll To Top" class="text-gray-500 dark:text-gray-400 bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 hover:bg-gray-300 p-2 rounded-full transition-all"> <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path> </svg> </button> </div> <script>const addClickEventToBtns=()=>{const o=document.getElementById("scroll-to-comment"),e=document.getElementById("scroll-to-top");o.addEventListener("click",()=>{document.getElementById("comment")?.scrollIntoView({behavior:"smooth"})}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})};addClickEventToBtns();const toggleScrollAndComments=o=>{const e=document.getElementById("scroll-top-and-comments");o?(e.classList.add("md:flex"),e.classList.remove("md:hidden")):(e.classList.add("md:hidden"),e.classList.remove("md:flex"))},handleWindowScroll=()=>{window.scrollY>50?toggleScrollAndComments(!0):toggleScrollAndComments(!1)};window.addEventListener("scroll",handleWindowScroll);
</script> <div class="py-5 justify-center lg:flex"> <article class="py-5 lg:w-2/3 mr-4"> <div> <header> <div class="border-b border-gray-200 dark:border-gray pb-10 space-y-1"> <div class="text-center space-y-6"> <h1 class="dark:text-gray-100 text-gray-900 font-extrabold leading-9 md:leading-14 md:text-5xl sm:leading-10 sm:text-4xl text-3xl tracking-tight" data-astro-transition-scope="astro-ktw3p6u4-1"> Agregando funcionalidad a interfaces con springboot </h1> <div class="flex flex-wrap"> <a href="/blog/tags/springboot" class="text-sm transition border border-primary-500 dark:hover:text-gray-900 duration-500 ease-in-out font-medium hover:bg-primary-500 hover:text-gray-100 mr-3 mt-2 px-3 py-1 rounded-lg text-primary-500 uppercase" data-astro-transition-scope="astro-sbgleo33-3">springboot</a><a href="/blog/tags/cglib" class="text-sm transition border border-primary-500 dark:hover:text-gray-900 duration-500 ease-in-out font-medium hover:bg-primary-500 hover:text-gray-100 mr-3 mt-2 px-3 py-1 rounded-lg text-primary-500 uppercase" data-astro-transition-scope="astro-sbgleo33-4">cglib</a><a href="/blog/tags/java" class="text-sm transition border border-primary-500 dark:hover:text-gray-900 duration-500 ease-in-out font-medium hover:bg-primary-500 hover:text-gray-100 mr-3 mt-2 px-3 py-1 rounded-lg text-primary-500 uppercase" data-astro-transition-scope="astro-sbgleo33-5">java</a><a href="/blog/tags/proxy" class="text-sm transition border border-primary-500 dark:hover:text-gray-900 duration-500 ease-in-out font-medium hover:bg-primary-500 hover:text-gray-100 mr-3 mt-2 px-3 py-1 rounded-lg text-primary-500 uppercase" data-astro-transition-scope="astro-sbgleo33-6">proxy</a> </div> <dl> <div> <dt class="sr-only">Published on</dt> <dd class="flex dark:text-gray-400 text-gray-500 flex-column font-semibold gap-1" data-astro-transition-scope="astro-lfnnksbi-2"> <time datetime="Sat Feb 03 2024 12:22:00 GMT-0300 (Chile Summer Time)" class="flex items-center">
üìÜ
<span class="md:ml-2 ml-1">   3 de febrero de 2024 </span> </time> <span class="mx-2"> ‚Ä¢ </span> <div class="flex items-center">
üïí
<span class="md:ml-2 ml-1.5">14 mins </span> </div> </dd> </div> </dl> </div> </div> </header> <div class="dark:divide-gray-700 divide-gray-200 divide-y grid-rows-[auto_1fr] pb-8 xl:divide-y-0"> <div class="dark:divide-gray-700 divide-gray-200 divide-y xl:col-span-3 xl:pb-0 xl:row-span-2"> <div class="pb-8 dark:prose-invert max-w-none prose pt-10"> <h3 id="haz-usado-feign-para-crear-un-cliente-http">¬øHaz usado Feign para crear un cliente http?</h3>
<p>Te habras dado cuenta que solo necesitas crear una interfaz y decorarla con la anotacion <code>@FeingClient</code>, con esto Feign hace la implementaci√≥n de manera magica sin necesidad de nosotros escribir c√≥digo o implementar dicha esa interfaz.</p>
<h3 id="como-puedo-hacer-algo-similar">¬øComo puedo hacer algo similar?</h3>
<p>En este post explicare como crear una anotaci√≥n personalizada con la que poder dar funcionalidad a interfaces sin necesidad de implementar dicha interfaz, esto lo shraremos con Proxies utilizando cglib (que ya viene incluida en springboot)</p>
<hr>
<h3 id="que-es-un-proxy">¬øQue es un Proxy?</h3>
<blockquote>
<p>Proxy es un patr√≥n de dise√±o estructural que proporciona un objeto que act√∫a como sustituto de un objeto de servicio real utilizado por un cliente. Un proxy recibe solicitudes del cliente, realiza parte del trabajo (control de acceso, almacenamiento en cach√©, etc.) y despu√©s pasa la solicitud a un objeto de servicio</p>
<p><a href="https://refactoring.guru/es/design-patterns/proxy/java/example" rel="nofollow" target="_blank">Proxy en Java / Patrones de dise√±o. (2014). Refactoring.guru<span> üîó</span></a>.</p>
</blockquote>
<h3 id="que-es-cglib">¬øQue es Cglib?</h3>
<p>Cglib es una libreria que permite generar y transformar bytecode de Java en tiempo de ejecuci√≥n, gracias a esta libreria podemos crear la implementaci√≥n de las interfaces en tiempo de ejecuci√≥n y agregar nuestra funcionalidad requerida.</p>
<hr>
<h2 id="guia">Guia</h2>
<p>Bueno, luego de explicar a grandes razgos eso vamos a explicar como podemos realizar nuestra propia anotacion y implementaci√≥n.</p>
<h3 id="creando-un-proyecto-nuevo">Creando un proyecto nuevo</h3>
<p>Cree un proyecto nuevo solo agregando la dependencia base de springboot</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.ec9os.css"><script type="module" src="/_astro/ec.sgewm.js"></script><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">dependencies {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  implementation </span><span style="--0:#9ECBFF;--1:#032F62">'org.springframework.boot:spring-boot-starter'</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="dependencies {  implementation 'org.springframework.boot:spring-boot-starter'}"><div></div></button></div></figure></div>
<h3 id="creando-la-anotaci√≥n-para-decorar-las-interfaces">Creando la anotaci√≥n para decorar las interfaces</h3>
<p>Ahora procedemos a crear nuestra anotaci√≥n que marcara las interfaces que debemos capturar y agregar el proxy.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">package</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.resourceprovider;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> java.lang.annotation.ElementType;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> java.lang.annotation.Retention;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> java.lang.annotation.RetentionPolicy;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> java.lang.annotation.Target;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">Target</span><span style="--0:#E1E4E8;--1:#24292E">(ElementType.TYPE)</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">Retention</span><span style="--0:#E1E4E8;--1:#24292E">(RetentionPolicy.RUNTIME)</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> @</span><span style="--0:#F97583;--1:#BF3441">interface</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">ResourceProvider</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package dev.fneira.interfaceprocessor.resourceprovider;import java.lang.annotation.ElementType;import java.lang.annotation.Retention;import java.lang.annotation.RetentionPolicy;import java.lang.annotation.Target;@Target(ElementType.TYPE)@Retention(RetentionPolicy.RUNTIME)public @interface ResourceProvider {}"><div></div></button></div></figure></div>
<p>la anotaci√≥n ser√° <code>@ResourceProvider</code> se usar√° para marcar las interfaces que deben ser capturadas</p>
<p><code>@Target(ElementType.TYPE)</code>: esto define el tipo de target al que apunta la anotaci√≥n, aqu√≠ definimos si queremos que se use a nivel de clase (type), metodo, campo, etc.</p>
<p><code>@Retention(RetentionPolicy.RUNTIME)</code>: esto define la politica de retencion de la anotaci√≥n, hay 3 valores: <code>RetentionPolicy.SOURCE</code>, <code>RetentionPolicy.CLASS</code>, <code>RetentionPolicy.RUNTIME</code>, nosotros usaremos RUNTIME ya que ser√° usada en tiempo de ejecuci√≥n</p>
<h3 id="creando-una-interfaz-con-la-anotaci√≥n-que-creamos">Creando una interfaz con la anotaci√≥n que creamos</h3>
<p>vamos a crearemos una interfaz que este decorada con la anotaci√≥n <code>@ResourceProvider</code></p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">IMyResourceProvider.java</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">package</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.interfaces;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.resourceprovider.ResourceProvider;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">ResourceProvider</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">interface</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">IMyResourceProvider</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  String </span><span style="--0:#B392F0;--1:#6F42C1">getResource</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package dev.fneira.interfaceprocessor.interfaces;import dev.fneira.interfaceprocessor.resourceprovider.ResourceProvider;@ResourceProviderpublic interface IMyResourceProvider {  String getResource();}"><div></div></button></div></figure></div>
<p>Como se puede ver es una interfaz simple con un m√©todo que retorna un string y se decora con nuestra anotaci√≥n.</p>
<h3 id="realizando-prueba">Realizando prueba</h3>
<p>Intentemos inyectar esta interfaz en el main con un <code>@Autowired</code>:</p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">InterfaceProcessorApplication.java</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">package</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.interfaces.IMyResourceProvider;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.annotation.Autowired;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.boot.CommandLineRunner;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.boot.SpringApplication;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.boot.autoconfigure.SpringBootApplication;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">SpringBootApplication</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">class</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">implements</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">CommandLineRunner</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> IMyResourceProvider myResourceProvider;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">Autowired</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> IMyResourceProvider </span><span style="--0:#FFAB70;--1:#AE4B07">myResourceProvider</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#79B8FF;--1:#005CC5">this</span><span style="--0:#E1E4E8;--1:#24292E">.myResourceProvider </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> myResourceProvider;</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">static</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">void</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">main</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">String</span><span style="--0:#E1E4E8;--1:#24292E">[] </span><span style="--0:#FFAB70;--1:#AE4B07">args</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    SpringApplication.</span><span style="--0:#B392F0;--1:#6F42C1">run</span><span style="--0:#E1E4E8;--1:#24292E">(InterfaceProcessorApplication.class, args);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">Override</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">void</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">run</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> String... </span><span style="--0:#FFAB70;--1:#AE4B07">args</span><span style="--0:#E1E4E8;--1:#24292E">) </span><span style="--0:#F97583;--1:#BF3441">throws</span><span style="--0:#E1E4E8;--1:#24292E"> Exception {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    System.out.</span><span style="--0:#B392F0;--1:#6F42C1">println</span><span style="--0:#E1E4E8;--1:#24292E">(myResourceProvider.</span><span style="--0:#B392F0;--1:#6F42C1">getResource</span><span style="--0:#E1E4E8;--1:#24292E">());</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package dev.fneira.interfaceprocessor;import dev.fneira.interfaceprocessor.interfaces.IMyResourceProvider;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.CommandLineRunner;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@SpringBootApplicationpublic class InterfaceProcessorApplication implements CommandLineRunner {  private final IMyResourceProvider myResourceProvider;  @Autowired  public InterfaceProcessorApplication(final IMyResourceProvider myResourceProvider) {    this.myResourceProvider = myResourceProvider;  }  public static void main(final String[] args) {    SpringApplication.run(InterfaceProcessorApplication.class, args);  }  @Override  public void run(final String... args) throws Exception {    System.out.println(myResourceProvider.getResource());  }}"><div></div></button></div></figure></div>
<p>en este caso implemente la clase CommandLineRunner para poder ejecutar de manera directa el metodo <code>getResource()</code> de mi interfaz.</p>
<p>si lo ejecutamos obtendremos un error de spring ya que no puede encontrar un bean para la interfaz IMyResourceProvider:</p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">***************************</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">APPLICATION</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">FAILED</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">TO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">START</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">***************************</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">Description:</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">Field</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">myResourceProvider</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">dev.fneira.interfaceprocessor.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">required</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">a</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">bean</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">of</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">type</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">'dev.fneira.interfaceprocessor.interfaces.IMyResourceProvider'</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">that</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">could</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">not</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">be</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">found.</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">The</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">injection</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">point</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">has</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">the</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">following</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">annotations:</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#B392F0;--1:#6F42C1">-</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">@org.springframework.beans.factory.annotation.Autowired</span><span style="--0:#E1E4E8;--1:#24292E">(required</span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#79B8FF;--1:#005CC5">true</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="***************************APPLICATION FAILED TO START***************************Description:Field myResourceProvider in dev.fneira.interfaceprocessor.InterfaceProcessorApplication required a bean of type 'dev.fneira.interfaceprocessor.interfaces.IMyResourceProvider' that could not be found.The injection point has the following annotations:  - @org.springframework.beans.factory.annotation.Autowired(required=true)"><div></div></button></div></figure></div>
<h3 id="agregando-el-bean-imyresourceprovider-al-contenedor-de-spring">Agregando el bean <code>IMyResourceProvider</code> al contenedor de spring</h3>
<p>creamos la clase que se encarga de agregar el bean de la interfaz al contenedor de spring y inyectarle funcionalidad con cglib</p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">BeanDefinitionRegistryPostProcessor.java</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">package</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.imp;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.interfaces.IMyResourceProvider;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.config.BeanDefinition;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.support.BeanDefinitionBuilder;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.support.BeanDefinitionRegistry;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.support.BeanDefinitionRegistryPostProcessor;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.cglib.proxy.Enhancer;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.cglib.proxy.MethodInterceptor;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.context.annotation.Configuration;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">Configuration</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">class</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">ResourceProviderBeanDefinitionRegistryPostProcessor</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">implements</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">BeanDefinitionRegistryPostProcessor</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">Override</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">void</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">postProcessBeanDefinitionRegistry</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinitionRegistry </span><span style="--0:#FFAB70;--1:#AE4B07">registry</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinitionBuilder builder </span><span style="--0:#F97583;--1:#BF3441">=</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        BeanDefinitionBuilder.</span><span style="--0:#B392F0;--1:#6F42C1">genericBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">(</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            IMyResourceProvider.class, () </span><span style="--0:#F97583;--1:#BF3441">-&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">createProxy</span><span style="--0:#E1E4E8;--1:#24292E">(IMyResourceProvider.class));</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinition beanDefinition </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> builder.</span><span style="--0:#B392F0;--1:#6F42C1">getRawBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    registry.</span><span style="--0:#B392F0;--1:#6F42C1">registerBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#9ECBFF;--1:#032F62">"myResourceProviderProxy"</span><span style="--0:#E1E4E8;--1:#24292E">, beanDefinition);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> &lt;</span><span style="--0:#F97583;--1:#BF3441">T</span><span style="--0:#E1E4E8;--1:#24292E">&gt; T </span><span style="--0:#B392F0;--1:#6F42C1">createProxy</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Class&lt;</span><span style="--0:#F97583;--1:#BF3441">T</span><span style="--0:#E1E4E8;--1:#24292E">&gt; </span><span style="--0:#FFAB70;--1:#AE4B07">targetClass</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Enhancer enhancer </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">new</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">Enhancer</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    enhancer.</span><span style="--0:#B392F0;--1:#6F42C1">setSuperclass</span><span style="--0:#E1E4E8;--1:#24292E">(targetClass);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    enhancer.</span><span style="--0:#B392F0;--1:#6F42C1">setCallback</span><span style="--0:#E1E4E8;--1:#24292E">(</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        (MethodInterceptor)</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            (obj, method, args, proxy) </span><span style="--0:#F97583;--1:#BF3441">-&gt;</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">                targetClass.</span><span style="--0:#B392F0;--1:#6F42C1">getSimpleName</span><span style="--0:#E1E4E8;--1:#24292E">() </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"."</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> method.</span><span style="--0:#B392F0;--1:#6F42C1">getName</span><span style="--0:#E1E4E8;--1:#24292E">() </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">" -&gt; Hello from CGLIB!"</span><span style="--0:#E1E4E8;--1:#24292E">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> (T) enhancer.</span><span style="--0:#B392F0;--1:#6F42C1">create</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package dev.fneira.interfaceprocessor.imp;import dev.fneira.interfaceprocessor.interfaces.IMyResourceProvider;import org.springframework.beans.factory.config.BeanDefinition;import org.springframework.beans.factory.support.BeanDefinitionBuilder;import org.springframework.beans.factory.support.BeanDefinitionRegistry;import org.springframework.beans.factory.support.BeanDefinitionRegistryPostProcessor;import org.springframework.cglib.proxy.Enhancer;import org.springframework.cglib.proxy.MethodInterceptor;import org.springframework.context.annotation.Configuration;@Configurationpublic class ResourceProviderBeanDefinitionRegistryPostProcessor implements BeanDefinitionRegistryPostProcessor {  @Override  public void postProcessBeanDefinitionRegistry(final BeanDefinitionRegistry registry) {    final BeanDefinitionBuilder builder =        BeanDefinitionBuilder.genericBeanDefinition(            IMyResourceProvider.class, () -> createProxy(IMyResourceProvider.class));    final BeanDefinition beanDefinition = builder.getRawBeanDefinition();    registry.registerBeanDefinition(&quot;myResourceProviderProxy&quot;, beanDefinition);  }  private <T> T createProxy(final Class<T> targetClass) {    final Enhancer enhancer = new Enhancer();    enhancer.setSuperclass(targetClass);    enhancer.setCallback(        (MethodInterceptor)            (obj, method, args, proxy) ->                targetClass.getSimpleName() + &quot;.&quot; + method.getName() + &quot; -> Hello from CGLIB!&quot;);    return (T) enhancer.create();  }}"><div></div></button></div></figure></div>
<p>Creamos la clase que implementa <code>BeanDefinitionRegistryPostProcessor</code>, aqui sobreescribir el m√©todo postProcessBeanDefinitionRegistry: es el metodo que permite modificar el registro de definici√≥n de bean interno del contexto de la aplicaci√≥n despu√©s de su inicializaci√≥n est√°ndar. Se habr√°n cargado todas las definiciones de beans normales, pero todav√≠a no se habr√° creado una instancia de ning√∫n bean. Esto permite agregar m√°s definiciones de beans antes de que comience la siguiente fase de posprocesamiento.</p>
<p>tambi√©n tenemos el m√©todo <code>createProxy</code> que es donde creamos el proxy para nuestra interfaz y le damos funcionalidad, en este caso retorna un String con el nombre de la clase y el nombre del metodo.</p>
<h3 id="realizando-prueba-1">Realizando prueba</h3>
<p>ahora si lo ejecutamos vemos que tenemos el valor que le declaramos en nuestro proxy</p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> Task </span><span style="--0:#B392F0;--1:#6F42C1">:InterfaceProcessorApplication.main</span><span style="--0:#E1E4E8;--1:#24292E">()</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  .   ____          _            __ _ _</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> /\\ / ___'_ __ _ _(</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#E1E4E8;--1:#24292E">)_ __  __ _ </span><span style="--0:#79B8FF;--1:#005CC5">\ \ \ </span><span style="--0:#E1E4E8;--1:#24292E">\</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">( ( )</span><span style="--0:#B392F0;--1:#6F42C1">\___</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">'_ | '</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">'_ \/ _` | \ \ \ \</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">  '</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">____</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">.__</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_\__,</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> =========</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E">==============</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">___/</span><span style="--0:#E1E4E8;--1:#24292E">=/_/_/_/</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">::</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Spring</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Boot</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">::</span><span style="--0:#E1E4E8;--1:#24292E">                (v3.2.2)</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:06:46.750-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">26335</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Starting</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">using</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Java</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">17.0</span><span style="--0:#9ECBFF;--1:#032F62">.3</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">with</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">PID</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">26335</span><span style="--0:#E1E4E8;--1:#24292E"> (/Users/fernando/Downloads/bsh/interfaceprocessor/build/classes/java/main </span><span style="--0:#9ECBFF;--1:#032F62">started</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">by</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">fernando</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/Users/fernando/Downloads/bsh</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:06:46.752-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">26335</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">No</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">active</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">profile</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">set,</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">falling</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">back</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">to</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">1</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">default</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">profile:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"default"</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:06:46.938-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">WARN</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">26335</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">o.s.c.a.ConfigurationClassPostProcessor</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Cannot</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">enhance</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">@Configuration</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">bean</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">definition</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">'resourceProviderBeanDefinitionRegistryPostProcessor'</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">since</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">its</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">singleton</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">instance</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">has</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">been</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">created</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">too</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">early.</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">The</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">typical</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">cause</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">is</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">a</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">non-static</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">@Bean</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">method</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">with</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">a</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">BeanDefinitionRegistryPostProcessor</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">return</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">type:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Consider</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">declaring</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">such</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">methods</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">as</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">'static'</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">and/or</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">marking</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">the</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">containing</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">configuration</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">class</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">as</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">'proxyBeanMethods=false'.</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:06:47.068-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">26335</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Started</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">0.524</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">seconds</span><span style="--0:#E1E4E8;--1:#24292E"> (process </span><span style="--0:#9ECBFF;--1:#032F62">running</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">for</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">0.676</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">IMyResourceProvider.getResource</span><span style="--0:#E1E4E8;--1:#24292E"> -</span><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Hello</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">from</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">CGLIB!</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> Task :InterfaceProcessorApplication.main()  .   ____          _            __ _ _ /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \ \\/  ___)| |_)| | | | | || (_| |  ) ) ) )  '  |____| .__|_| |_|_| |_\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot ::                (v3.2.2)2024-02-05T21:06:46.750-03:00  INFO 26335 --- [           main] d.f.i.InterfaceProcessorApplication      : Starting InterfaceProcessorApplication using Java 17.0.3 with PID 26335 (/Users/fernando/Downloads/bsh/interfaceprocessor/build/classes/java/main started by fernando in /Users/fernando/Downloads/bsh)2024-02-05T21:06:46.752-03:00  INFO 26335 --- [           main] d.f.i.InterfaceProcessorApplication      : No active profile set, falling back to 1 default profile: &quot;default&quot;2024-02-05T21:06:46.938-03:00  WARN 26335 --- [           main] o.s.c.a.ConfigurationClassPostProcessor  : Cannot enhance @Configuration bean definition 'resourceProviderBeanDefinitionRegistryPostProcessor' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static' and/or marking the containing configuration class as 'proxyBeanMethods=false'.2024-02-05T21:06:47.068-03:00  INFO 26335 --- [           main] d.f.i.InterfaceProcessorApplication      : Started InterfaceProcessorApplication in 0.524 seconds (process running for 0.676)IMyResourceProvider.getResource -> Hello from CGLIB!"><div></div></button></div></figure></div>
<p>ya estamos generando un bean para nuestra interfaz y agregando funcionalidad mediante un proxy con Cglib.</p>
<h3 id="creando-mas-interfaces">Creando mas interfaces</h3>
<p>¬øPero que pasa si creamos otra interfaz?</p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">IMyResource2Provider.java</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">package</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.interfaces;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.resourceprovider.ResourceProvider;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">ResourceProvider</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">interface</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">IMyResource2Provider</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  String </span><span style="--0:#B392F0;--1:#6F42C1">getResource</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package dev.fneira.interfaceprocessor.interfaces;import dev.fneira.interfaceprocessor.resourceprovider.ResourceProvider;@ResourceProviderpublic interface IMyResource2Provider {  String getResource();}"><div></div></button></div></figure></div>
<p>la agregamos a nuestra clase main y ejecutamos:</p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">***************************</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">APPLICATION</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">FAILED</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">TO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">START</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">***************************</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">Description:</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">Parameter</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">1</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">of</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">constructor</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">dev.fneira.interfaceprocessor.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">required</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">a</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">bean</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">of</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">type</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">'dev.fneira.interfaceprocessor.interfaces.IMyResource2Provider'</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">that</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">could</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">not</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">be</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">found.</span></div><div class="ec-line">
</div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">Action:</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">Consider</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">defining</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">a</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">bean</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">of</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">type</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">'dev.fneira.interfaceprocessor.interfaces.IMyResource2Provider'</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">your</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">configuration.</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="***************************APPLICATION FAILED TO START***************************Description:Parameter 1 of constructor in dev.fneira.interfaceprocessor.InterfaceProcessorApplication required a bean of type 'dev.fneira.interfaceprocessor.interfaces.IMyResource2Provider' that could not be found.Action:Consider defining a bean of type 'dev.fneira.interfaceprocessor.interfaces.IMyResource2Provider' in your configuration."><div></div></button></div></figure></div>
<p>vemos que falla, porque ahora no encuentra nuesto bean para IMyResource2Provider, ya que de la forma que lo definimos no queda dinamico detectando las interfaces decoradas con @ResourceProvider y autogenerando los beans con su implementaci√≥n.</p>
<h3 id="agregando-beans-de-manera-dinamica">Agregando beans de manera dinamica</h3>
<p>para solucionar esto de forma dinamica y automatica, debemos modificar la clase ResourceProviderBeanDefinitionRegistryPostProcessor para que nos permita escanear el proyecto y buscar las interfaces decoradas con la anotacion @ResourceProvider:</p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">BeanDefinitionRegistryPostProcessor.java</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">package</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.imp;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.resourceprovider.ResourceProvider;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> java.util.Set;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.annotation.AnnotatedBeanDefinition;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.config.BeanDefinition;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.support.BeanDefinitionBuilder;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.support.BeanDefinitionRegistry;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.support.BeanDefinitionRegistryPostProcessor;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.cglib.proxy.Enhancer;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.cglib.proxy.MethodInterceptor;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.context.annotation.Configuration;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.core.type.filter.AnnotationTypeFilter;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">Configuration</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">class</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">ResourceProviderBeanDefinitionRegistryPostProcessor</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">implements</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">BeanDefinitionRegistryPostProcessor</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">Override</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">void</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">postProcessBeanDefinitionRegistry</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinitionRegistry </span><span style="--0:#FFAB70;--1:#AE4B07">registry</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> String basePackage </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"dev.fneira.interfaceprocessor"</span><span style="--0:#E1E4E8;--1:#24292E">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Set&lt;</span><span style="--0:#F97583;--1:#BF3441">BeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">&gt; beanDefinitions </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">getBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">(basePackage);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">for</span><span style="--0:#E1E4E8;--1:#24292E"> (</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinition beanDefinition </span><span style="--0:#F97583;--1:#BF3441">:</span><span style="--0:#E1E4E8;--1:#24292E"> beanDefinitions) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      String beanClassName </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> beanDefinition.</span><span style="--0:#B392F0;--1:#6F42C1">getBeanClassName</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#F97583;--1:#BF3441">try</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        Class&lt;</span><span style="--0:#F97583;--1:#BF3441">?</span><span style="--0:#E1E4E8;--1:#24292E">&gt; targetClass </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> Class.</span><span style="--0:#B392F0;--1:#6F42C1">forName</span><span style="--0:#E1E4E8;--1:#24292E">(beanClassName);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        </span><span style="--0:#B392F0;--1:#6F42C1">registerBeanForInterface</span><span style="--0:#E1E4E8;--1:#24292E">(registry, targetClass);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      } </span><span style="--0:#F97583;--1:#BF3441">catch</span><span style="--0:#E1E4E8;--1:#24292E"> (ClassNotFoundException </span><span style="--0:#FFAB70;--1:#AE4B07">e</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        </span><span style="--0:#F97583;--1:#BF3441">throw</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">new</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">RuntimeException</span><span style="--0:#E1E4E8;--1:#24292E">(e);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> Set&lt;</span><span style="--0:#F97583;--1:#BF3441">BeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">&gt; </span><span style="--0:#B392F0;--1:#6F42C1">getBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> String </span><span style="--0:#FFAB70;--1:#AE4B07">basePackage</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> ClassPathScanningCandidateComponentProvider provider </span><span style="--0:#F97583;--1:#BF3441">=</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        </span><span style="--0:#F97583;--1:#BF3441">new</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">ClassPathScanningCandidateComponentProvider</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#79B8FF;--1:#005CC5">false</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">          @</span><span style="--0:#F97583;--1:#BF3441">Override</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">          </span><span style="--0:#F97583;--1:#BF3441">protected</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">boolean</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">isCandidateComponent</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> AnnotatedBeanDefinition </span><span style="--0:#FFAB70;--1:#AE4B07">beanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">super</span><span style="--0:#E1E4E8;--1:#24292E">.</span><span style="--0:#B392F0;--1:#6F42C1">isCandidateComponent</span><span style="--0:#E1E4E8;--1:#24292E">(beanDefinition)</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">                </span><span style="--0:#F97583;--1:#BF3441">||</span><span style="--0:#E1E4E8;--1:#24292E"> beanDefinition.</span><span style="--0:#B392F0;--1:#6F42C1">getMetadata</span><span style="--0:#E1E4E8;--1:#24292E">().</span><span style="--0:#B392F0;--1:#6F42C1">isAbstract</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">          }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        };</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    provider.</span><span style="--0:#B392F0;--1:#6F42C1">addIncludeFilter</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">new</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">AnnotationTypeFilter</span><span style="--0:#E1E4E8;--1:#24292E">(ResourceProvider.class, </span><span style="--0:#79B8FF;--1:#005CC5">true</span><span style="--0:#E1E4E8;--1:#24292E">, </span><span style="--0:#79B8FF;--1:#005CC5">true</span><span style="--0:#E1E4E8;--1:#24292E">));</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> provider.</span><span style="--0:#B392F0;--1:#6F42C1">findCandidateComponents</span><span style="--0:#E1E4E8;--1:#24292E">(basePackage);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> &lt;</span><span style="--0:#F97583;--1:#BF3441">T</span><span style="--0:#E1E4E8;--1:#24292E">&gt; </span><span style="--0:#F97583;--1:#BF3441">void</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">registerBeanForInterface</span><span style="--0:#E1E4E8;--1:#24292E">(</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinitionRegistry </span><span style="--0:#FFAB70;--1:#AE4B07">registry</span><span style="--0:#E1E4E8;--1:#24292E">, </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Class&lt;</span><span style="--0:#F97583;--1:#BF3441">T</span><span style="--0:#E1E4E8;--1:#24292E">&gt; </span><span style="--0:#FFAB70;--1:#AE4B07">targetClass</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinitionBuilder builder </span><span style="--0:#F97583;--1:#BF3441">=</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        BeanDefinitionBuilder.</span><span style="--0:#B392F0;--1:#6F42C1">genericBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">(targetClass, () </span><span style="--0:#F97583;--1:#BF3441">-&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">createProxy</span><span style="--0:#E1E4E8;--1:#24292E">(targetClass));</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinition beanDefinition </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> builder.</span><span style="--0:#B392F0;--1:#6F42C1">getRawBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    registry.</span><span style="--0:#B392F0;--1:#6F42C1">registerBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">(targetClass.</span><span style="--0:#B392F0;--1:#6F42C1">getSimpleName</span><span style="--0:#E1E4E8;--1:#24292E">() </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"Proxy"</span><span style="--0:#E1E4E8;--1:#24292E">, beanDefinition);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> &lt;</span><span style="--0:#F97583;--1:#BF3441">T</span><span style="--0:#E1E4E8;--1:#24292E">&gt; T </span><span style="--0:#B392F0;--1:#6F42C1">createProxy</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Class&lt;</span><span style="--0:#F97583;--1:#BF3441">T</span><span style="--0:#E1E4E8;--1:#24292E">&gt; </span><span style="--0:#FFAB70;--1:#AE4B07">targetClass</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Enhancer enhancer </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">new</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">Enhancer</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    enhancer.</span><span style="--0:#B392F0;--1:#6F42C1">setSuperclass</span><span style="--0:#E1E4E8;--1:#24292E">(targetClass);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    enhancer.</span><span style="--0:#B392F0;--1:#6F42C1">setCallback</span><span style="--0:#E1E4E8;--1:#24292E">(</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        (MethodInterceptor)</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            (obj, method, args, proxy) </span><span style="--0:#F97583;--1:#BF3441">-&gt;</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">                targetClass.</span><span style="--0:#B392F0;--1:#6F42C1">getSimpleName</span><span style="--0:#E1E4E8;--1:#24292E">() </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"."</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> method.</span><span style="--0:#B392F0;--1:#6F42C1">getName</span><span style="--0:#E1E4E8;--1:#24292E">() </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">" -&gt; Hello from CGLIB!"</span><span style="--0:#E1E4E8;--1:#24292E">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> (T) enhancer.</span><span style="--0:#B392F0;--1:#6F42C1">create</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package dev.fneira.interfaceprocessor.imp;import dev.fneira.interfaceprocessor.resourceprovider.ResourceProvider;import java.util.Set;import org.springframework.beans.factory.annotation.AnnotatedBeanDefinition;import org.springframework.beans.factory.config.BeanDefinition;import org.springframework.beans.factory.support.BeanDefinitionBuilder;import org.springframework.beans.factory.support.BeanDefinitionRegistry;import org.springframework.beans.factory.support.BeanDefinitionRegistryPostProcessor;import org.springframework.cglib.proxy.Enhancer;import org.springframework.cglib.proxy.MethodInterceptor;import org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider;import org.springframework.context.annotation.Configuration;import org.springframework.core.type.filter.AnnotationTypeFilter;@Configurationpublic class ResourceProviderBeanDefinitionRegistryPostProcessor    implements BeanDefinitionRegistryPostProcessor {  @Override  public void postProcessBeanDefinitionRegistry(final BeanDefinitionRegistry registry) {    final String basePackage = &quot;dev.fneira.interfaceprocessor&quot;;    final Set<BeanDefinition> beanDefinitions = getBeanDefinition(basePackage);    for (final BeanDefinition beanDefinition : beanDefinitions) {      String beanClassName = beanDefinition.getBeanClassName();      try {        Class<?> targetClass = Class.forName(beanClassName);        registerBeanForInterface(registry, targetClass);      } catch (ClassNotFoundException e) {        throw new RuntimeException(e);      }    }  }  private Set<BeanDefinition> getBeanDefinition(final String basePackage) {    final ClassPathScanningCandidateComponentProvider provider =        new ClassPathScanningCandidateComponentProvider(false) {          @Override          protected boolean isCandidateComponent(final AnnotatedBeanDefinition beanDefinition) {            return super.isCandidateComponent(beanDefinition)                || beanDefinition.getMetadata().isAbstract();          }        };    provider.addIncludeFilter(new AnnotationTypeFilter(ResourceProvider.class, true, true));    return provider.findCandidateComponents(basePackage);  }  private <T> void registerBeanForInterface(      final BeanDefinitionRegistry registry, final Class<T> targetClass) {    final BeanDefinitionBuilder builder =        BeanDefinitionBuilder.genericBeanDefinition(targetClass, () -> createProxy(targetClass));    final BeanDefinition beanDefinition = builder.getRawBeanDefinition();    registry.registerBeanDefinition(targetClass.getSimpleName() + &quot;Proxy&quot;, beanDefinition);  }  private <T> T createProxy(final Class<T> targetClass) {    final Enhancer enhancer = new Enhancer();    enhancer.setSuperclass(targetClass);    enhancer.setCallback(        (MethodInterceptor)            (obj, method, args, proxy) ->                targetClass.getSimpleName() + &quot;.&quot; + method.getName() + &quot; -> Hello from CGLIB!&quot;);    return (T) enhancer.create();  }}"><div></div></button></div></figure></div>
<p>Agregamos dos metodos</p>
<p><code>getBeanDefinition</code>: es el encargado de escanear el classpath y buscar las interfaces decoradas con @ResourceProvider</p>
<p><code>registerBeanForInterface</code>: se encarga de crear el registrar la definicion del bean creando el proxy para la interfaz que viene en la variable <code>targetClass</code></p>
<p>ahora si ejecutamos obtendremos lo siguiente:</p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> Task </span><span style="--0:#B392F0;--1:#6F42C1">:InterfaceProcessorApplication.main</span><span style="--0:#E1E4E8;--1:#24292E">()</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  .   ____          _            __ _ _</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> /\\ / ___'_ __ _ _(</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#E1E4E8;--1:#24292E">)_ __  __ _ </span><span style="--0:#79B8FF;--1:#005CC5">\ \ \ </span><span style="--0:#E1E4E8;--1:#24292E">\</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">( ( )</span><span style="--0:#B392F0;--1:#6F42C1">\___</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">'_ | '</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">'_ \/ _` | \ \ \ \</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">  '</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">____</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">.__</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_\__,</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> =========</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E">==============</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">___/</span><span style="--0:#E1E4E8;--1:#24292E">=/_/_/_/</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">::</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Spring</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Boot</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">::</span><span style="--0:#E1E4E8;--1:#24292E">                (v3.2.2)</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:10:49.924-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">26611</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Starting</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">using</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Java</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">17.0</span><span style="--0:#9ECBFF;--1:#032F62">.3</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">with</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">PID</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">26611</span><span style="--0:#E1E4E8;--1:#24292E"> (/Users/fernando/Downloads/bsh/interfaceprocessor/build/classes/java/main </span><span style="--0:#9ECBFF;--1:#032F62">started</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">by</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">fernando</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/Users/fernando/Downloads/bsh</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:10:49.926-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">26611</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">No</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">active</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">profile</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">set,</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">falling</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">back</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">to</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">1</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">default</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">profile:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"default"</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:10:50.092-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">WARN</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">26611</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">o.s.c.a.ConfigurationClassPostProcessor</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Cannot</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">enhance</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">@Configuration</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">bean</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">definition</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">'resourceProviderBeanDefinitionRegistryPostProcessor'</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">since</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">its</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">singleton</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">instance</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">has</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">been</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">created</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">too</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">early.</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">The</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">typical</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">cause</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">is</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">a</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">non-static</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">@Bean</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">method</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">with</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">a</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">BeanDefinitionRegistryPostProcessor</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">return</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">type:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Consider</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">declaring</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">such</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">methods</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">as</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">'static'</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">and/or</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">marking</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">the</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">containing</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">configuration</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">class</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">as</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">'proxyBeanMethods=false'.</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:10:50.214-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">26611</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Started</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">0.485</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">seconds</span><span style="--0:#E1E4E8;--1:#24292E"> (process </span><span style="--0:#9ECBFF;--1:#032F62">running</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">for</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">0.656</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">IMyResourceProvider.getResource</span><span style="--0:#E1E4E8;--1:#24292E"> -</span><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Hello</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">from</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">CGLIB!</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">IMyResource2Provider.getResource</span><span style="--0:#E1E4E8;--1:#24292E"> -</span><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Hello</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">from</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">CGLIB!</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> Task :InterfaceProcessorApplication.main()  .   ____          _            __ _ _ /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \ \\/  ___)| |_)| | | | | || (_| |  ) ) ) )  '  |____| .__|_| |_|_| |_\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot ::                (v3.2.2)2024-02-05T21:10:49.924-03:00  INFO 26611 --- [           main] d.f.i.InterfaceProcessorApplication      : Starting InterfaceProcessorApplication using Java 17.0.3 with PID 26611 (/Users/fernando/Downloads/bsh/interfaceprocessor/build/classes/java/main started by fernando in /Users/fernando/Downloads/bsh)2024-02-05T21:10:49.926-03:00  INFO 26611 --- [           main] d.f.i.InterfaceProcessorApplication      : No active profile set, falling back to 1 default profile: &quot;default&quot;2024-02-05T21:10:50.092-03:00  WARN 26611 --- [           main] o.s.c.a.ConfigurationClassPostProcessor  : Cannot enhance @Configuration bean definition 'resourceProviderBeanDefinitionRegistryPostProcessor' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static' and/or marking the containing configuration class as 'proxyBeanMethods=false'.2024-02-05T21:10:50.214-03:00  INFO 26611 --- [           main] d.f.i.InterfaceProcessorApplication      : Started InterfaceProcessorApplication in 0.485 seconds (process running for 0.656)IMyResourceProvider.getResource -> Hello from CGLIB!IMyResource2Provider.getResource -> Hello from CGLIB!"><div></div></button></div></figure></div>
<p>como se puede apreciar se shran inyectar ambas interfaces y cada una devuelve el String que definimos en el metodo createProxy()</p>
<p>ahora podemos crear mas interfaces y todas se les agregara el proxy, pero que pasa si queremos generar mas de un metodo en las interfaces?, y tambien queremos agregarle valores dinamicos a cada metodo?</p>
<h3 id="creando-anotaci√≥n-resourcevalue">Creando anotaci√≥n <code>@ResourceValue</code></h3>
<p>Ahora creamos una anotaci√≥n que marcara los metodos y poder agregar funcionalidad de manera dinamica a cada uno.</p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">ResourceValue.java</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">package</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.resourceprovider;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> java.lang.annotation.ElementType;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> java.lang.annotation.Retention;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> java.lang.annotation.RetentionPolicy;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> java.lang.annotation.Target;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">Retention</span><span style="--0:#E1E4E8;--1:#24292E">(RetentionPolicy.RUNTIME)</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">Target</span><span style="--0:#E1E4E8;--1:#24292E">(ElementType.METHOD)</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> @</span><span style="--0:#F97583;--1:#BF3441">interface</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">ResourceValue</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  String </span><span style="--0:#B392F0;--1:#6F42C1">key</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  String </span><span style="--0:#B392F0;--1:#6F42C1">source</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package dev.fneira.interfaceprocessor.resourceprovider;import java.lang.annotation.ElementType;import java.lang.annotation.Retention;import java.lang.annotation.RetentionPolicy;import java.lang.annotation.Target;@Retention(RetentionPolicy.RUNTIME)@Target(ElementType.METHOD)public @interface ResourceValue {  String key();  String source();}"><div></div></button></div></figure></div>
<p>en este caso el target sera: <code>@Target(ElementType.METHOD)</code> ya que queremos aplicar este decorador solo a los metodos, no a las clases ni interfaces.</p>
<p>la anotaci√≥n tiene dos campos obligatorios: <code>key</code> y <code>source</code> que son necesarios para la implementaci√≥n</p>
<h3 id="modificando-interfaces">Modificando interfaces</h3>
<p>Agregamos a las interfaces el decorador <code>@ResourceValue</code></p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">IMyResourceProvider.java</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">package</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.interfaces;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.resourceprovider.ResourceProvider;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.resourceprovider.ResourceValue;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">ResourceProvider</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">interface</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">IMyResourceProvider</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">ResourceValue</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#79B8FF;--1:#005CC5">key</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"my-key-1"</span><span style="--0:#E1E4E8;--1:#24292E">, </span><span style="--0:#79B8FF;--1:#005CC5">source</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"datagrid"</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  String </span><span style="--0:#B392F0;--1:#6F42C1">getResource</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">ResourceValue</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#79B8FF;--1:#005CC5">key</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"my-other-resource-key"</span><span style="--0:#E1E4E8;--1:#24292E">, </span><span style="--0:#79B8FF;--1:#005CC5">source</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"redis"</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  String </span><span style="--0:#B392F0;--1:#6F42C1">getOtherResource</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package dev.fneira.interfaceprocessor.interfaces;import dev.fneira.interfaceprocessor.resourceprovider.ResourceProvider;import dev.fneira.interfaceprocessor.resourceprovider.ResourceValue;@ResourceProviderpublic interface IMyResourceProvider {  @ResourceValue(key = &quot;my-key-1&quot;, source = &quot;datagrid&quot;)  String getResource();  @ResourceValue(key = &quot;my-other-resource-key&quot;, source = &quot;redis&quot;)  String getOtherResource();}"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">IMyResource2Provider.java</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">package</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.interfaces;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.resourceprovider.ResourceProvider;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.resourceprovider.ResourceValue;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">ResourceProvider</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">interface</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">IMyResource2Provider</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">ResourceValue</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#79B8FF;--1:#005CC5">key</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"os.name"</span><span style="--0:#E1E4E8;--1:#24292E">, </span><span style="--0:#79B8FF;--1:#005CC5">source</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"environment"</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  String </span><span style="--0:#B392F0;--1:#6F42C1">getResource</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package dev.fneira.interfaceprocessor.interfaces;import dev.fneira.interfaceprocessor.resourceprovider.ResourceProvider;import dev.fneira.interfaceprocessor.resourceprovider.ResourceValue;@ResourceProviderpublic interface IMyResource2Provider {  @ResourceValue(key = &quot;os.name&quot;, source = &quot;environment&quot;)  String getResource();}"><div></div></button></div></figure></div>
<p>en este caso tendre 3 fuentes: redis, datagrid y environment</p>
<h3 id="modificando-metodo-createproxy">Modificando metodo <code>createProxy</code></h3>
<p>ahora debemos modificar el metodo createProxy de la clase postProcessBeanDefinitionRegistry para mostrar el los valores de la anotacion <code>@ResourceValue</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">&lt;</span><span style="--0:#E1E4E8;--1:#24292E">T</span><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> T </span><span style="--0:#B392F0;--1:#6F42C1">createProxy</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Class</span><span style="--0:#F97583;--1:#BF3441">&lt;</span><span style="--0:#E1E4E8;--1:#24292E">T</span><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> targetClass) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Enhancer enhancer </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">new</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">Enhancer</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    enhancer.</span><span style="--0:#B392F0;--1:#6F42C1">setSuperclass</span><span style="--0:#E1E4E8;--1:#24292E">(targetClass);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    enhancer.</span><span style="--0:#B392F0;--1:#6F42C1">setCallback</span><span style="--0:#E1E4E8;--1:#24292E">(</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        (MethodInterceptor)</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            (obj, method, args, proxy) </span><span style="--0:#F97583;--1:#BF3441">-&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">              </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> ResourceValue resourceValue </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> method.</span><span style="--0:#B392F0;--1:#6F42C1">getAnnotation</span><span style="--0:#E1E4E8;--1:#24292E">(ResourceValue.class);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">              </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> targetClass.</span><span style="--0:#B392F0;--1:#6F42C1">getSimpleName</span><span style="--0:#E1E4E8;--1:#24292E">()</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">                  </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"."</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">                  </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> method.</span><span style="--0:#B392F0;--1:#6F42C1">getName</span><span style="--0:#E1E4E8;--1:#24292E">()</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">                  </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">" -&gt; "</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">                  </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> resourceValue.</span><span style="--0:#B392F0;--1:#6F42C1">key</span><span style="--0:#E1E4E8;--1:#24292E">()</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">                  </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">" - "</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">                  </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> resourceValue.</span><span style="--0:#B392F0;--1:#6F42C1">source</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            });</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> (T) enhancer.</span><span style="--0:#B392F0;--1:#6F42C1">create</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="  private <T> T createProxy(final Class<T> targetClass) {    final Enhancer enhancer = new Enhancer();    enhancer.setSuperclass(targetClass);    enhancer.setCallback(        (MethodInterceptor)            (obj, method, args, proxy) -> {              final ResourceValue resourceValue = method.getAnnotation(ResourceValue.class);              return targetClass.getSimpleName()                  + &quot;.&quot;                  + method.getName()                  + &quot; -> &quot;                  + resourceValue.key()                  + &quot; - &quot;                  + resourceValue.source();            });    return (T) enhancer.create();  }"><div></div></button></div></figure></div>
<p>mediante el api de <code>Reflection</code> de java podemos obtener la anotaci√≥n del m√©todo ejecutado mediante el proxy y asi obtener sus valores</p>
<p>si ejecutamos obtendremos lo siguiente:</p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> Task </span><span style="--0:#B392F0;--1:#6F42C1">:InterfaceProcessorApplication.main</span><span style="--0:#E1E4E8;--1:#24292E">()</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  .   ____          _            __ _ _</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> /\\ / ___'_ __ _ _(</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#E1E4E8;--1:#24292E">)_ __  __ _ </span><span style="--0:#79B8FF;--1:#005CC5">\ \ \ </span><span style="--0:#E1E4E8;--1:#24292E">\</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">( ( )</span><span style="--0:#B392F0;--1:#6F42C1">\___</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">'_ | '</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">'_ \/ _` | \ \ \ \</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">  '</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">____</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">.__</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_\__,</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> =========</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E">==============</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">___/</span><span style="--0:#E1E4E8;--1:#24292E">=/_/_/_/</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">::</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Spring</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Boot</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">::</span><span style="--0:#E1E4E8;--1:#24292E">                (v3.2.2)</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:18:31.302-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">27325</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Starting</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">using</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Java</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">17.0</span><span style="--0:#9ECBFF;--1:#032F62">.3</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">with</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">PID</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">27325</span><span style="--0:#E1E4E8;--1:#24292E"> (/Users/fernando/Downloads/bsh/interfaceprocessor/build/classes/java/main </span><span style="--0:#9ECBFF;--1:#032F62">started</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">by</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">fernando</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/Users/fernando/Downloads/bsh</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:18:31.304-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">27325</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">No</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">active</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">profile</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">set,</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">falling</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">back</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">to</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">1</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">default</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">profile:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"default"</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:18:31.472-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">WARN</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">27325</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">o.s.c.a.ConfigurationClassPostProcessor</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Cannot</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">enhance</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">@Configuration</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">bean</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">definition</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">'resourceProviderBeanDefinitionRegistryPostProcessor'</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">since</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">its</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">singleton</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">instance</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">has</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">been</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">created</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">too</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">early.</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">The</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">typical</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">cause</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">is</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">a</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">non-static</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">@Bean</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">method</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">with</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">a</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">BeanDefinitionRegistryPostProcessor</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">return</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">type:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Consider</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">declaring</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">such</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">methods</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">as</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">'static'</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">and/or</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">marking</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">the</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">containing</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">configuration</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">class</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">as</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">'proxyBeanMethods=false'.</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:18:31.593-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">27325</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Started</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">0.455</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">seconds</span><span style="--0:#E1E4E8;--1:#24292E"> (process </span><span style="--0:#9ECBFF;--1:#032F62">running</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">for</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">0.623</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">IMyResourceProvider.getResource</span><span style="--0:#E1E4E8;--1:#24292E"> -</span><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">my-key-1</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">-</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">redis</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">IMyResourceProvider.getOtherResource</span><span style="--0:#E1E4E8;--1:#24292E"> -</span><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">my-other-resource-key</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">-</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">redis</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">IMyResource2Provider.getResource</span><span style="--0:#E1E4E8;--1:#24292E"> -</span><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">my-key-2</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">-</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">environment</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> Task :InterfaceProcessorApplication.main()  .   ____          _            __ _ _ /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \ \\/  ___)| |_)| | | | | || (_| |  ) ) ) )  '  |____| .__|_| |_|_| |_\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot ::                (v3.2.2)2024-02-05T21:18:31.302-03:00  INFO 27325 --- [           main] d.f.i.InterfaceProcessorApplication      : Starting InterfaceProcessorApplication using Java 17.0.3 with PID 27325 (/Users/fernando/Downloads/bsh/interfaceprocessor/build/classes/java/main started by fernando in /Users/fernando/Downloads/bsh)2024-02-05T21:18:31.304-03:00  INFO 27325 --- [           main] d.f.i.InterfaceProcessorApplication      : No active profile set, falling back to 1 default profile: &quot;default&quot;2024-02-05T21:18:31.472-03:00  WARN 27325 --- [           main] o.s.c.a.ConfigurationClassPostProcessor  : Cannot enhance @Configuration bean definition 'resourceProviderBeanDefinitionRegistryPostProcessor' since its singleton instance has been created too early. The typical cause is a non-static @Bean method with a BeanDefinitionRegistryPostProcessor return type: Consider declaring such methods as 'static' and/or marking the containing configuration class as 'proxyBeanMethods=false'.2024-02-05T21:18:31.593-03:00  INFO 27325 --- [           main] d.f.i.InterfaceProcessorApplication      : Started InterfaceProcessorApplication in 0.455 seconds (process running for 0.623)IMyResourceProvider.getResource -> my-key-1 - redisIMyResourceProvider.getOtherResource -> my-other-resource-key - redisIMyResource2Provider.getResource -> my-key-2 - environment"><div></div></button></div></figure></div>
<p>ahora el inconveniente es que no podemos agregar otras dependencias ya que en este punto aun no se inicializado los beans de springboot, para eso vamos a crear otras clases:</p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">InterfaceProxyFactoryBean.java</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">package</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.resourceprovider;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.FakeDataProviderStub;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> java.lang.reflect.Method;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.annotation.Autowired;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.cglib.proxy.MethodInterceptor;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.cglib.proxy.MethodProxy;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.context.annotation.Configuration;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.core.env.Environment;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">Configuration</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">class</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">ResourceProviderHandler</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">implements</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">MethodInterceptor</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> FakeDataProviderStub redisProvider;</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> FakeDataProviderStub datagridProvider;</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Environment environment;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">Autowired</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">ResourceProviderHandler</span><span style="--0:#E1E4E8;--1:#24292E">(</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      FakeDataProviderStub </span><span style="--0:#FFAB70;--1:#AE4B07">redisProvider</span><span style="--0:#E1E4E8;--1:#24292E">,</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      FakeDataProviderStub </span><span style="--0:#FFAB70;--1:#AE4B07">datagridProvider</span><span style="--0:#E1E4E8;--1:#24292E">,</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      Environment </span><span style="--0:#FFAB70;--1:#AE4B07">environment</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#79B8FF;--1:#005CC5">this</span><span style="--0:#E1E4E8;--1:#24292E">.redisProvider </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> redisProvider;</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#79B8FF;--1:#005CC5">this</span><span style="--0:#E1E4E8;--1:#24292E">.datagridProvider </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> datagridProvider;</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#79B8FF;--1:#005CC5">this</span><span style="--0:#E1E4E8;--1:#24292E">.environment </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> environment;</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">Override</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> Object </span><span style="--0:#B392F0;--1:#6F42C1">intercept</span><span style="--0:#E1E4E8;--1:#24292E">(</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Object </span><span style="--0:#FFAB70;--1:#AE4B07">obj</span><span style="--0:#E1E4E8;--1:#24292E">, </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Method </span><span style="--0:#FFAB70;--1:#AE4B07">method</span><span style="--0:#E1E4E8;--1:#24292E">, </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">Object</span><span style="--0:#E1E4E8;--1:#24292E">[] </span><span style="--0:#FFAB70;--1:#AE4B07">args</span><span style="--0:#E1E4E8;--1:#24292E">, MethodProxy </span><span style="--0:#FFAB70;--1:#AE4B07">proxy</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#F97583;--1:#BF3441">throws</span><span style="--0:#E1E4E8;--1:#24292E"> Throwable {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> ResourceValue resourceValue </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> method.</span><span style="--0:#B392F0;--1:#6F42C1">getAnnotation</span><span style="--0:#E1E4E8;--1:#24292E">(ResourceValue.class);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    System.out.</span><span style="--0:#B392F0;--1:#6F42C1">println</span><span style="--0:#E1E4E8;--1:#24292E">(</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        obj.</span><span style="--0:#B392F0;--1:#6F42C1">getClass</span><span style="--0:#E1E4E8;--1:#24292E">().</span><span style="--0:#B392F0;--1:#6F42C1">getSimpleName</span><span style="--0:#E1E4E8;--1:#24292E">()</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"."</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> method.</span><span style="--0:#B392F0;--1:#6F42C1">getName</span><span style="--0:#E1E4E8;--1:#24292E">()</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">" -&gt; "</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> resourceValue.</span><span style="--0:#B392F0;--1:#6F42C1">key</span><span style="--0:#E1E4E8;--1:#24292E">()</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">" - "</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> resourceValue.</span><span style="--0:#B392F0;--1:#6F42C1">source</span><span style="--0:#E1E4E8;--1:#24292E">());</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">if</span><span style="--0:#E1E4E8;--1:#24292E"> (resourceValue.</span><span style="--0:#B392F0;--1:#6F42C1">source</span><span style="--0:#E1E4E8;--1:#24292E">().</span><span style="--0:#B392F0;--1:#6F42C1">equals</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#9ECBFF;--1:#032F62">"redis"</span><span style="--0:#E1E4E8;--1:#24292E">)) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">this</span><span style="--0:#E1E4E8;--1:#24292E">.redisProvider.</span><span style="--0:#B392F0;--1:#6F42C1">getResource</span><span style="--0:#E1E4E8;--1:#24292E">(resourceValue.</span><span style="--0:#B392F0;--1:#6F42C1">key</span><span style="--0:#E1E4E8;--1:#24292E">());</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    } </span><span style="--0:#F97583;--1:#BF3441">else</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">if</span><span style="--0:#E1E4E8;--1:#24292E"> (resourceValue.</span><span style="--0:#B392F0;--1:#6F42C1">source</span><span style="--0:#E1E4E8;--1:#24292E">().</span><span style="--0:#B392F0;--1:#6F42C1">equals</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#9ECBFF;--1:#032F62">"datagrid"</span><span style="--0:#E1E4E8;--1:#24292E">)) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">this</span><span style="--0:#E1E4E8;--1:#24292E">.datagridProvider.</span><span style="--0:#B392F0;--1:#6F42C1">getResource</span><span style="--0:#E1E4E8;--1:#24292E">(resourceValue.</span><span style="--0:#B392F0;--1:#6F42C1">key</span><span style="--0:#E1E4E8;--1:#24292E">());</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    } </span><span style="--0:#F97583;--1:#BF3441">else</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">if</span><span style="--0:#E1E4E8;--1:#24292E"> (resourceValue.</span><span style="--0:#B392F0;--1:#6F42C1">source</span><span style="--0:#E1E4E8;--1:#24292E">().</span><span style="--0:#B392F0;--1:#6F42C1">equals</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#9ECBFF;--1:#032F62">"environment"</span><span style="--0:#E1E4E8;--1:#24292E">)) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">this</span><span style="--0:#E1E4E8;--1:#24292E">.environment.</span><span style="--0:#B392F0;--1:#6F42C1">getProperty</span><span style="--0:#E1E4E8;--1:#24292E">(resourceValue.</span><span style="--0:#B392F0;--1:#6F42C1">key</span><span style="--0:#E1E4E8;--1:#24292E">());</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    } </span><span style="--0:#F97583;--1:#BF3441">else</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#F97583;--1:#BF3441">throw</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">new</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">IllegalArgumentException</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#9ECBFF;--1:#032F62">"Invalid source: "</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">+</span><span style="--0:#E1E4E8;--1:#24292E"> resourceValue.</span><span style="--0:#B392F0;--1:#6F42C1">source</span><span style="--0:#E1E4E8;--1:#24292E">());</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package dev.fneira.interfaceprocessor.resourceprovider;import dev.fneira.interfaceprocessor.FakeDataProviderStub;import java.lang.reflect.Method;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.cglib.proxy.MethodInterceptor;import org.springframework.cglib.proxy.MethodProxy;import org.springframework.context.annotation.Configuration;import org.springframework.core.env.Environment;@Configurationpublic class ResourceProviderHandler implements MethodInterceptor {  private final FakeDataProviderStub redisProvider;  private final FakeDataProviderStub datagridProvider;  private final Environment environment;  @Autowired  public ResourceProviderHandler(      FakeDataProviderStub redisProvider,      FakeDataProviderStub datagridProvider,      Environment environment) {    this.redisProvider = redisProvider;    this.datagridProvider = datagridProvider;    this.environment = environment;  }  @Override  public Object intercept(      final Object obj, final Method method, final Object[] args, MethodProxy proxy)      throws Throwable {    final ResourceValue resourceValue = method.getAnnotation(ResourceValue.class);    System.out.println(        obj.getClass().getSimpleName()            + &quot;.&quot;            + method.getName()            + &quot; -> &quot;            + resourceValue.key()            + &quot; - &quot;            + resourceValue.source());    if (resourceValue.source().equals(&quot;redis&quot;)) {      return this.redisProvider.getResource(resourceValue.key());    } else if (resourceValue.source().equals(&quot;datagrid&quot;)) {      return this.datagridProvider.getResource(resourceValue.key());    } else if (resourceValue.source().equals(&quot;environment&quot;)) {      return this.environment.getProperty(resourceValue.key());    } else {      throw new IllegalArgumentException(&quot;Invalid source: &quot; + resourceValue.source());    }  }}"><div></div></button></div></figure></div>
<p>esta clase es la encargada de interceptar las ejecuciones de nuestro proxy esto lo hace implementando la clase MethodInterceptor y sobreescribiendo el metodo intercept, aqui ya podemos inyectar otras dependencias</p>
<p>ahora toca crear <code>InterfaceProxyFactoryBean.java</code> que es la encargara de la creaci√≥n del proxy</p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">InterfaceProxyFactoryBean.java</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">package</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.imp;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.resourceprovider.ResourceProviderHandler;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.BeansException;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.BeanFactory;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.BeanFactoryAware;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.FactoryBean;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.InitializingBean;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.cglib.proxy.Enhancer;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">class</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">ResourceHandlerProxyFactoryBean</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">implements</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">FactoryBean</span><span style="--0:#E1E4E8;--1:#24292E">&lt;</span><span style="--0:#F97583;--1:#BF3441">Object</span><span style="--0:#E1E4E8;--1:#24292E">&gt;, </span><span style="--0:#B392F0;--1:#6F42C1">InitializingBean</span><span style="--0:#E1E4E8;--1:#24292E">, </span><span style="--0:#B392F0;--1:#6F42C1">BeanFactoryAware</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> BeanFactory beanFactory;</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> Class&lt;</span><span style="--0:#F97583;--1:#BF3441">?</span><span style="--0:#E1E4E8;--1:#24292E">&gt; type;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">Override</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">void</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">setBeanFactory</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanFactory </span><span style="--0:#FFAB70;--1:#AE4B07">beanFactory</span><span style="--0:#E1E4E8;--1:#24292E">) </span><span style="--0:#F97583;--1:#BF3441">throws</span><span style="--0:#E1E4E8;--1:#24292E"> BeansException {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#79B8FF;--1:#005CC5">this</span><span style="--0:#E1E4E8;--1:#24292E">.beanFactory </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> beanFactory;</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  &lt;</span><span style="--0:#F97583;--1:#BF3441">T</span><span style="--0:#E1E4E8;--1:#24292E">&gt; T </span><span style="--0:#B392F0;--1:#6F42C1">createProxy</span><span style="--0:#E1E4E8;--1:#24292E">() {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> (T) Enhancer.</span><span style="--0:#B392F0;--1:#6F42C1">create</span><span style="--0:#E1E4E8;--1:#24292E">(type, beanFactory.</span><span style="--0:#B392F0;--1:#6F42C1">getBean</span><span style="--0:#E1E4E8;--1:#24292E">(ResourceProviderHandler.class));</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">Override</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> Object </span><span style="--0:#B392F0;--1:#6F42C1">getObject</span><span style="--0:#E1E4E8;--1:#24292E">() {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">createProxy</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">Override</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> Class&lt;</span><span style="--0:#F97583;--1:#BF3441">?</span><span style="--0:#E1E4E8;--1:#24292E">&gt; </span><span style="--0:#B392F0;--1:#6F42C1">getObjectType</span><span style="--0:#E1E4E8;--1:#24292E">() {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> type;</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">Override</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">void</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">afterPropertiesSet</span><span style="--0:#E1E4E8;--1:#24292E">() {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">if</span><span style="--0:#E1E4E8;--1:#24292E"> (type </span><span style="--0:#F97583;--1:#BF3441">==</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">null</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#F97583;--1:#BF3441">throw</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">new</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">IllegalArgumentException</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#9ECBFF;--1:#032F62">"Property 'type' is required"</span><span style="--0:#E1E4E8;--1:#24292E">);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">void</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">setType</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Class&lt;</span><span style="--0:#F97583;--1:#BF3441">?</span><span style="--0:#E1E4E8;--1:#24292E">&gt; </span><span style="--0:#FFAB70;--1:#AE4B07">type</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#79B8FF;--1:#005CC5">this</span><span style="--0:#E1E4E8;--1:#24292E">.type </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> type;</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package dev.fneira.interfaceprocessor.imp;import dev.fneira.interfaceprocessor.resourceprovider.ResourceProviderHandler;import org.springframework.beans.BeansException;import org.springframework.beans.factory.BeanFactory;import org.springframework.beans.factory.BeanFactoryAware;import org.springframework.beans.factory.FactoryBean;import org.springframework.beans.factory.InitializingBean;import org.springframework.cglib.proxy.Enhancer;public class ResourceHandlerProxyFactoryBean    implements FactoryBean<Object>, InitializingBean, BeanFactoryAware {  private BeanFactory beanFactory;  private Class<?> type;  @Override  public void setBeanFactory(final BeanFactory beanFactory) throws BeansException {    this.beanFactory = beanFactory;  }  <T> T createProxy() {    return (T) Enhancer.create(type, beanFactory.getBean(ResourceProviderHandler.class));  }  @Override  public Object getObject() {    return createProxy();  }  @Override  public Class<?> getObjectType() {    return type;  }  @Override  public void afterPropertiesSet() {    if (type == null) {      throw new IllegalArgumentException(&quot;Property 'type' is required&quot;);    }  }  public void setType(final Class<?> type) {    this.type = type;  }}"><div></div></button></div></figure></div>
<p>ahora modificamos la clase que implementa <code>BeanDefinitionRegistryPostProcessor.java</code> para indicar cual clase es nuestra factory:</p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">BeanDefinitionRegistryPostProcessor.java</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">package</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.imp;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> dev.fneira.interfaceprocessor.resourceprovider.ResourceProvider;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> java.util.Set;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.FactoryBean;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.annotation.AnnotatedBeanDefinition;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.config.BeanDefinition;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.config.BeanDefinitionHolder;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.support.BeanDefinitionBuilder;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.support.BeanDefinitionReaderUtils;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.support.BeanDefinitionRegistry;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.beans.factory.support.BeanDefinitionRegistryPostProcessor;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.context.annotation.Configuration;</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">import</span><span style="--0:#E1E4E8;--1:#24292E"> org.springframework.core.type.filter.AnnotationTypeFilter;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">@</span><span style="--0:#F97583;--1:#BF3441">Configuration</span></div><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">class</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">ResourceProviderBeanDefinitionRegistryPostProcessor</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">implements</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">BeanDefinitionRegistryPostProcessor</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  @</span><span style="--0:#F97583;--1:#BF3441">Override</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">public</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">void</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">postProcessBeanDefinitionRegistry</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinitionRegistry </span><span style="--0:#FFAB70;--1:#AE4B07">registry</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> String basePackage </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"dev.fneira.interfaceprocessor"</span><span style="--0:#E1E4E8;--1:#24292E">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Set&lt;</span><span style="--0:#F97583;--1:#BF3441">BeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">&gt; beanDefinitions </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">getBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">(basePackage);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">for</span><span style="--0:#E1E4E8;--1:#24292E"> (</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinition beanDefinition </span><span style="--0:#F97583;--1:#BF3441">:</span><span style="--0:#E1E4E8;--1:#24292E"> beanDefinitions) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      String beanClassName </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> beanDefinition.</span><span style="--0:#B392F0;--1:#6F42C1">getBeanClassName</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#F97583;--1:#BF3441">try</span><span style="--0:#E1E4E8;--1:#24292E"> {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        Class&lt;</span><span style="--0:#F97583;--1:#BF3441">?</span><span style="--0:#E1E4E8;--1:#24292E">&gt; targetClass </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> Class.</span><span style="--0:#B392F0;--1:#6F42C1">forName</span><span style="--0:#E1E4E8;--1:#24292E">(beanClassName);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        </span><span style="--0:#B392F0;--1:#6F42C1">registerBeanForInterface</span><span style="--0:#E1E4E8;--1:#24292E">(registry, targetClass);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      } </span><span style="--0:#F97583;--1:#BF3441">catch</span><span style="--0:#E1E4E8;--1:#24292E"> (ClassNotFoundException </span><span style="--0:#FFAB70;--1:#AE4B07">e</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        </span><span style="--0:#F97583;--1:#BF3441">throw</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">new</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">RuntimeException</span><span style="--0:#E1E4E8;--1:#24292E">(e);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> Set&lt;</span><span style="--0:#F97583;--1:#BF3441">BeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">&gt; </span><span style="--0:#B392F0;--1:#6F42C1">getBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> String </span><span style="--0:#FFAB70;--1:#AE4B07">basePackage</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> ClassPathScanningCandidateComponentProvider provider </span><span style="--0:#F97583;--1:#BF3441">=</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        </span><span style="--0:#F97583;--1:#BF3441">new</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">ClassPathScanningCandidateComponentProvider</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#79B8FF;--1:#005CC5">false</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">          @</span><span style="--0:#F97583;--1:#BF3441">Override</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">          </span><span style="--0:#F97583;--1:#BF3441">protected</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">boolean</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">isCandidateComponent</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> AnnotatedBeanDefinition </span><span style="--0:#FFAB70;--1:#AE4B07">beanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">super</span><span style="--0:#E1E4E8;--1:#24292E">.</span><span style="--0:#B392F0;--1:#6F42C1">isCandidateComponent</span><span style="--0:#E1E4E8;--1:#24292E">(beanDefinition)</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">                </span><span style="--0:#F97583;--1:#BF3441">||</span><span style="--0:#E1E4E8;--1:#24292E"> beanDefinition.</span><span style="--0:#B392F0;--1:#6F42C1">getMetadata</span><span style="--0:#E1E4E8;--1:#24292E">().</span><span style="--0:#B392F0;--1:#6F42C1">isAbstract</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">          }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">        };</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    provider.</span><span style="--0:#B392F0;--1:#6F42C1">addIncludeFilter</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#F97583;--1:#BF3441">new</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">AnnotationTypeFilter</span><span style="--0:#E1E4E8;--1:#24292E">(ResourceProvider.class, </span><span style="--0:#79B8FF;--1:#005CC5">true</span><span style="--0:#E1E4E8;--1:#24292E">, </span><span style="--0:#79B8FF;--1:#005CC5">true</span><span style="--0:#E1E4E8;--1:#24292E">));</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">return</span><span style="--0:#E1E4E8;--1:#24292E"> provider.</span><span style="--0:#B392F0;--1:#6F42C1">findCandidateComponents</span><span style="--0:#E1E4E8;--1:#24292E">(basePackage);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">private</span><span style="--0:#E1E4E8;--1:#24292E"> &lt;</span><span style="--0:#F97583;--1:#BF3441">T</span><span style="--0:#E1E4E8;--1:#24292E">&gt; </span><span style="--0:#F97583;--1:#BF3441">void</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">registerBeanForInterface</span><span style="--0:#E1E4E8;--1:#24292E">(</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinitionRegistry </span><span style="--0:#FFAB70;--1:#AE4B07">registry</span><span style="--0:#E1E4E8;--1:#24292E">, </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> Class&lt;</span><span style="--0:#F97583;--1:#BF3441">T</span><span style="--0:#E1E4E8;--1:#24292E">&gt; </span><span style="--0:#FFAB70;--1:#AE4B07">targetClass</span><span style="--0:#E1E4E8;--1:#24292E">) {</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinitionBuilder definition </span><span style="--0:#F97583;--1:#BF3441">=</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            BeanDefinitionBuilder.</span><span style="--0:#B392F0;--1:#6F42C1">genericBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">(ResourceHandlerProxyFactoryBean.class)</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">                    .</span><span style="--0:#B392F0;--1:#6F42C1">addPropertyValue</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#9ECBFF;--1:#032F62">"type"</span><span style="--0:#E1E4E8;--1:#24292E">, targetClass);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinition beanDefinition </span><span style="--0:#F97583;--1:#BF3441">=</span><span style="--0:#E1E4E8;--1:#24292E"> definition.</span><span style="--0:#B392F0;--1:#6F42C1">getRawBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">();</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    beanDefinition.</span><span style="--0:#B392F0;--1:#6F42C1">setAttribute</span><span style="--0:#E1E4E8;--1:#24292E">(FactoryBean.OBJECT_TYPE_ATTRIBUTE, targetClass);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    beanDefinition.</span><span style="--0:#B392F0;--1:#6F42C1">setPrimary</span><span style="--0:#E1E4E8;--1:#24292E">(</span><span style="--0:#79B8FF;--1:#005CC5">true</span><span style="--0:#E1E4E8;--1:#24292E">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    </span><span style="--0:#F97583;--1:#BF3441">final</span><span style="--0:#E1E4E8;--1:#24292E"> BeanDefinitionHolder beanDefinitionHolder </span><span style="--0:#F97583;--1:#BF3441">=</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">            </span><span style="--0:#F97583;--1:#BF3441">new</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">BeanDefinitionHolder</span><span style="--0:#E1E4E8;--1:#24292E">(beanDefinition, targetClass.</span><span style="--0:#B392F0;--1:#6F42C1">getSimpleName</span><span style="--0:#E1E4E8;--1:#24292E">());</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">    BeanDefinitionReaderUtils.</span><span style="--0:#B392F0;--1:#6F42C1">registerBeanDefinition</span><span style="--0:#E1E4E8;--1:#24292E">(beanDefinitionHolder, registry);</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  }</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package dev.fneira.interfaceprocessor.imp;import dev.fneira.interfaceprocessor.resourceprovider.ResourceProvider;import java.util.Set;import org.springframework.beans.factory.FactoryBean;import org.springframework.beans.factory.annotation.AnnotatedBeanDefinition;import org.springframework.beans.factory.config.BeanDefinition;import org.springframework.beans.factory.config.BeanDefinitionHolder;import org.springframework.beans.factory.support.BeanDefinitionBuilder;import org.springframework.beans.factory.support.BeanDefinitionReaderUtils;import org.springframework.beans.factory.support.BeanDefinitionRegistry;import org.springframework.beans.factory.support.BeanDefinitionRegistryPostProcessor;import org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider;import org.springframework.context.annotation.Configuration;import org.springframework.core.type.filter.AnnotationTypeFilter;@Configurationpublic class ResourceProviderBeanDefinitionRegistryPostProcessor    implements BeanDefinitionRegistryPostProcessor {  @Override  public void postProcessBeanDefinitionRegistry(final BeanDefinitionRegistry registry) {    final String basePackage = &quot;dev.fneira.interfaceprocessor&quot;;    final Set<BeanDefinition> beanDefinitions = getBeanDefinition(basePackage);    for (final BeanDefinition beanDefinition : beanDefinitions) {      String beanClassName = beanDefinition.getBeanClassName();      try {        Class<?> targetClass = Class.forName(beanClassName);        registerBeanForInterface(registry, targetClass);      } catch (ClassNotFoundException e) {        throw new RuntimeException(e);      }    }  }  private Set<BeanDefinition> getBeanDefinition(final String basePackage) {    final ClassPathScanningCandidateComponentProvider provider =        new ClassPathScanningCandidateComponentProvider(false) {          @Override          protected boolean isCandidateComponent(final AnnotatedBeanDefinition beanDefinition) {            return super.isCandidateComponent(beanDefinition)                || beanDefinition.getMetadata().isAbstract();          }        };    provider.addIncludeFilter(new AnnotationTypeFilter(ResourceProvider.class, true, true));    return provider.findCandidateComponents(basePackage);  }  private <T> void registerBeanForInterface(      final BeanDefinitionRegistry registry, final Class<T> targetClass) {    final BeanDefinitionBuilder definition =            BeanDefinitionBuilder.genericBeanDefinition(ResourceHandlerProxyFactoryBean.class)                    .addPropertyValue(&quot;type&quot;, targetClass);    final BeanDefinition beanDefinition = definition.getRawBeanDefinition();    beanDefinition.setAttribute(FactoryBean.OBJECT_TYPE_ATTRIBUTE, targetClass);    beanDefinition.setPrimary(true);    final BeanDefinitionHolder beanDefinitionHolder =            new BeanDefinitionHolder(beanDefinition, targetClass.getSimpleName());    BeanDefinitionReaderUtils.registerBeanDefinition(beanDefinitionHolder, registry);  }}"><div></div></button></div></figure></div>
<p>ahora si ejecutamos nuestro programa:</p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> Task </span><span style="--0:#B392F0;--1:#6F42C1">:InterfaceProcessorApplication.main</span><span style="--0:#E1E4E8;--1:#24292E">()</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  .   ____          _            __ _ _</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> /\\ / ___'_ __ _ _(</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#E1E4E8;--1:#24292E">)_ __  __ _ </span><span style="--0:#79B8FF;--1:#005CC5">\ \ \ </span><span style="--0:#E1E4E8;--1:#24292E">\</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">( ( )</span><span style="--0:#B392F0;--1:#6F42C1">\___</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">'_ | '</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">'_ \/ _` | \ \ \ \</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">  '</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">____</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">.__</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_\__,</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> =========</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E">==============</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">___/</span><span style="--0:#E1E4E8;--1:#24292E">=/_/_/_/</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">::</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Spring</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Boot</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">::</span><span style="--0:#E1E4E8;--1:#24292E">                (v3.2.2)</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:33:27.933-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">28442</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Starting</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">using</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Java</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">17.0</span><span style="--0:#9ECBFF;--1:#032F62">.3</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">with</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">PID</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">28442</span><span style="--0:#E1E4E8;--1:#24292E"> (/Users/fernando/Downloads/bsh/interfaceprocessor/build/classes/java/main </span><span style="--0:#9ECBFF;--1:#032F62">started</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">by</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">fernando</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/Users/fernando/Downloads/bsh</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:33:27.934-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">28442</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">No</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">active</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">profile</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">set,</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">falling</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">back</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">to</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">1</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">default</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">profile:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"default"</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:33:28.210-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">28442</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Started</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">0.458</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">seconds</span><span style="--0:#E1E4E8;--1:#24292E"> (process </span><span style="--0:#9ECBFF;--1:#032F62">running</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">for</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">0.646</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line mark" data-marker-label="Result">
</div><div class="ec-line mark"><span style="--0:#c2a8f3;--1:#613aa9">IMyResourceProvider$$EnhancerByCGLIB$$d852720d.getResource</span><span style="--0:#E1E4E8;--1:#24292E"> -</span><span style="--0:#fb99a3;--1:#982934">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">my-key-1</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">-</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">redis</span></div><div class="ec-line mark"><span style="--0:#c2a8f3;--1:#613aa9">Resource:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">my-key-1</span></div><div class="ec-line mark"><span style="--0:#c2a8f3;--1:#613aa9">IMyResourceProvider$$EnhancerByCGLIB$$d852720d.getOtherResource</span><span style="--0:#E1E4E8;--1:#24292E"> -</span><span style="--0:#fb99a3;--1:#982934">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">my-other-resource-key</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">-</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">redis</span></div><div class="ec-line mark"><span style="--0:#c2a8f3;--1:#613aa9">Resource:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">my-other-resource-key</span></div><div class="ec-line mark"><span style="--0:#c2a8f3;--1:#613aa9">IMyResource2Provider$$EnhancerByCGLIB$$26f2ceaf.getResource</span><span style="--0:#E1E4E8;--1:#24292E"> -</span><span style="--0:#fb99a3;--1:#982934">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">os.name</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">-</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">environment</span></div><div class="ec-line mark"><span style="--0:#c2a8f3;--1:#613aa9">Mac</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">OS</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">X</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> Task :InterfaceProcessorApplication.main()  .   ____          _            __ _ _ /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \ \\/  ___)| |_)| | | | | || (_| |  ) ) ) )  '  |____| .__|_| |_|_| |_\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot ::                (v3.2.2)2024-02-05T21:33:27.933-03:00  INFO 28442 --- [           main] d.f.i.InterfaceProcessorApplication      : Starting InterfaceProcessorApplication using Java 17.0.3 with PID 28442 (/Users/fernando/Downloads/bsh/interfaceprocessor/build/classes/java/main started by fernando in /Users/fernando/Downloads/bsh)2024-02-05T21:33:27.934-03:00  INFO 28442 --- [           main] d.f.i.InterfaceProcessorApplication      : No active profile set, falling back to 1 default profile: &quot;default&quot;2024-02-05T21:33:28.210-03:00  INFO 28442 --- [           main] d.f.i.InterfaceProcessorApplication      : Started InterfaceProcessorApplication in 0.458 seconds (process running for 0.646)IMyResourceProvider$$EnhancerByCGLIB$$d852720d.getResource -> my-key-1 - redisResource: my-key-1IMyResourceProvider$$EnhancerByCGLIB$$d852720d.getOtherResource -> my-other-resource-key - redisResource: my-other-resource-keyIMyResource2Provider$$EnhancerByCGLIB$$26f2ceaf.getResource -> os.name - environmentMac OS X"><div></div></button></div></figure></div>
<p>y listo esta funcionando, ahora solo queda aplicar nuestra shica en <code>ResourceProviderHandler</code> para nuestras interfaces.</p>
<h3 id="resumen">Resumen</h3>
<ul>
<li>Creamos la anotaci√≥n <code>@ResourceProvider</code> para marcar las interfaces que queremos que se cree un proxy y se inyecte el bean al contexto de spring, de manera automatica,</li>
<li>Creamos la anotaci√≥n <code>@ResourceValue</code> para proveer de valores a los metodos dentro de la interfaz de manera de crear una implementaciones dinamicas.</li>
<li>Creamos una clase de tipo <code>BeanFactory</code> que es la fabrica de nuestras interfaces y la encargada de crear el proxy</li>
</ul>
<p>Si quieres hacer esto mas dinamico a√∫n, como crear mas de una anotaci√≥n y distintos handlers para cada una, puedes ver un ejemplo en mi Github: <a href="https://github.com/fneiraj/JavaSpringExamples/tree/main/interfaceprocessor" rel="nofollow" target="_blank">fneiraj/JavaSpringExamples<span> üîó</span></a></p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#F97583;--1:#BF3441">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> Task </span><span style="--0:#B392F0;--1:#6F42C1">:InterfaceProcessorApplication.main</span><span style="--0:#E1E4E8;--1:#24292E">()</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">  .   ____          _            __ _ _</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> /\\ / ___'_ __ _ _(</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#E1E4E8;--1:#24292E">)_ __  __ _ </span><span style="--0:#79B8FF;--1:#005CC5">\ \ \ </span><span style="--0:#E1E4E8;--1:#24292E">\</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E">( ( )</span><span style="--0:#B392F0;--1:#6F42C1">\___</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">'_ | '</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">'_ \/ _` | \ \ \ \</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">  '</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">____</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">.__</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_\__,</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#B392F0;--1:#6F42C1">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> =========</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">_</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#E1E4E8;--1:#24292E">==============</span><span style="--0:#F97583;--1:#BF3441">|</span><span style="--0:#B392F0;--1:#6F42C1">___/</span><span style="--0:#E1E4E8;--1:#24292E">=/_/_/_/</span></div><div class="ec-line"><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">::</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Spring</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Boot</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">::</span><span style="--0:#E1E4E8;--1:#24292E">                (v3.2.2)</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:33:27.933-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">28442</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Starting</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">using</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Java</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">17.0</span><span style="--0:#9ECBFF;--1:#032F62">.3</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">with</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">PID</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">28442</span><span style="--0:#E1E4E8;--1:#24292E"> (/Users/fernando/Downloads/bsh/interfaceprocessor/build/classes/java/main </span><span style="--0:#9ECBFF;--1:#032F62">started</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">by</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">fernando</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">/Users/fernando/Downloads/bsh</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:33:27.934-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">28442</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">No</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">active</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">profile</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">set,</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">falling</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">back</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">to</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">1</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">default</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">profile:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">"default"</span></div><div class="ec-line"><span style="--0:#B392F0;--1:#6F42C1">2024-02-05T21:33:28.210-03:00</span><span style="--0:#E1E4E8;--1:#24292E">  </span><span style="--0:#9ECBFF;--1:#032F62">INFO</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">28442</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">---</span><span style="--0:#E1E4E8;--1:#24292E"> [           </span><span style="--0:#9ECBFF;--1:#032F62">main]</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">d.f.i.InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E">      </span><span style="--0:#9ECBFF;--1:#032F62">:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">Started</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">InterfaceProcessorApplication</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">in</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">0.458</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">seconds</span><span style="--0:#E1E4E8;--1:#24292E"> (process </span><span style="--0:#9ECBFF;--1:#032F62">running</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">for</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#79B8FF;--1:#005CC5">0.646</span><span style="--0:#E1E4E8;--1:#24292E">)</span></div><div class="ec-line mark" data-marker-label="Result">
</div><div class="ec-line mark"><span style="--0:#c2a8f3;--1:#613aa9">IMyResourceProvider$$EnhancerByCGLIB$$d852720d.getResource</span><span style="--0:#E1E4E8;--1:#24292E"> -</span><span style="--0:#fb99a3;--1:#982934">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">my-key-1</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">-</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">redis</span></div><div class="ec-line mark"><span style="--0:#c2a8f3;--1:#613aa9">Resource:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">my-key-1</span></div><div class="ec-line mark"><span style="--0:#c2a8f3;--1:#613aa9">IMyResourceProvider$$EnhancerByCGLIB$$d852720d.getOtherResource</span><span style="--0:#E1E4E8;--1:#24292E"> -</span><span style="--0:#fb99a3;--1:#982934">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">my-other-resource-key</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">-</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">redis</span></div><div class="ec-line mark"><span style="--0:#c2a8f3;--1:#613aa9">Resource:</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">my-other-resource-key</span></div><div class="ec-line mark"><span style="--0:#c2a8f3;--1:#613aa9">IMyResource2Provider$$EnhancerByCGLIB$$26f2ceaf.getResource</span><span style="--0:#E1E4E8;--1:#24292E"> -</span><span style="--0:#fb99a3;--1:#982934">&gt;</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">os.name</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">-</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">environment</span></div><div class="ec-line mark"><span style="--0:#c2a8f3;--1:#613aa9">Mac</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">OS</span><span style="--0:#E1E4E8;--1:#24292E"> </span><span style="--0:#9ECBFF;--1:#032F62">X</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> Task :InterfaceProcessorApplication.main()  .   ____          _            __ _ _ /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \ \\/  ___)| |_)| | | | | || (_| |  ) ) ) )  '  |____| .__|_| |_|_| |_\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot ::                (v3.2.2)2024-02-05T21:33:27.933-03:00  INFO 28442 --- [           main] d.f.i.InterfaceProcessorApplication      : Starting InterfaceProcessorApplication using Java 17.0.3 with PID 28442 (/Users/fernando/Downloads/bsh/interfaceprocessor/build/classes/java/main started by fernando in /Users/fernando/Downloads/bsh)2024-02-05T21:33:27.934-03:00  INFO 28442 --- [           main] d.f.i.InterfaceProcessorApplication      : No active profile set, falling back to 1 default profile: &quot;default&quot;2024-02-05T21:33:28.210-03:00  INFO 28442 --- [           main] d.f.i.InterfaceProcessorApplication      : Started InterfaceProcessorApplication in 0.458 seconds (process running for 0.646)IMyResourceProvider$$EnhancerByCGLIB$$d852720d.getResource -> my-key-1 - redisResource: my-key-1IMyResourceProvider$$EnhancerByCGLIB$$d852720d.getOtherResource -> my-other-resource-key - redisResource: my-other-resource-keyIMyResource2Provider$$EnhancerByCGLIB$$26f2ceaf.getResource -> os.name - environmentMac OS X"><div></div></button></div></figure></div> </div> </div> <div class="text-center dark:text-gray-300 pb-6 pt-6 text-gray-700" id="comment"> <script src="https://giscus.app/client.js" data-repo="fneiraj/blog" data-repo-id="R_kgDOIVcPIg" data-category="General" data-category-id="DIC_kwDOIVcPIs4Cc8s7" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="es" crossorigin="anonymous" async=""></script> </div> <footer> <div class="text-sm font-medium flex flex-col sm:flex-row sm:justify-between sm:text-base">   </div> </footer> </div> </div> </article> <div id="toc" class="astro-maxqm4li hidden lg:block md:w-1/3"> <div class="astro-maxqm4li border mx-5bg-card rounded-lg shadow-sm sticky text-card-foreground top-[6em]"> <div class="astro-maxqm4li p-6 flex flex-col space-y-1.5"> <h3 class="astro-maxqm4li font-semibold leading-none text-center text-lg tracking-tight">
Tabla de contenido
</h3> </div> <hr class="astro-maxqm4li"> <div class="astro-maxqm4li py-2 flat-scrollbar-normal max-h-[80vh] overflow-y-auto p-6 pt-0 px-2"> <ul class="astro-maxqm4li"> <a href="#haz-usado-feign-para-crear-un-cliente-http" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> ¬øHaz usado Feign para crear un cliente http? </li> </a><a href="#como-puedo-hacer-algo-similar" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> ¬øComo puedo hacer algo similar? </li> </a><a href="#que-es-un-proxy" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> ¬øQue es un Proxy? </li> </a><a href="#que-es-cglib" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> ¬øQue es Cglib? </li> </a><a href="#guia" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:1em"> Guia </li> </a><a href="#creando-un-proyecto-nuevo" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> Creando un proyecto nuevo </li> </a><a href="#creando-la-anotaci√≥n-para-decorar-las-interfaces" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> Creando la anotaci√≥n para decorar las interfaces </li> </a><a href="#creando-una-interfaz-con-la-anotaci√≥n-que-creamos" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> Creando una interfaz con la anotaci√≥n que creamos </li> </a><a href="#realizando-prueba" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> Realizando prueba </li> </a><a href="#agregando-el-bean-imyresourceprovider-al-contenedor-de-spring" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> Agregando el bean IMyResourceProvider al contenedor de spring </li> </a><a href="#realizando-prueba-1" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> Realizando prueba </li> </a><a href="#creando-mas-interfaces" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> Creando mas interfaces </li> </a><a href="#agregando-beans-de-manera-dinamica" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> Agregando beans de manera dinamica </li> </a><a href="#creando-anotaci√≥n-resourcevalue" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> Creando anotaci√≥n @ResourceValue </li> </a><a href="#modificando-interfaces" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> Modificando interfaces </li> </a><a href="#modificando-metodo-createproxy" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> Modificando metodo createProxy </li> </a><a href="#resumen" class="astro-maxqm4li"> <li class="astro-maxqm4li py-2 hover:bg-gray-100 hover:dark:bg-gray-900 text-sm" style="padding-left:2em"> Resumen </li> </a> </ul> </div> </div> </div>   </div> </section>  </main> </div> <footer> <div class="flex items-center flex-col mt-16"> <div class="flex space-x-4 mb-3"> <a class="text-sm transition hover:text-gray-600 text-gray-500" target="_blank" rel="noopener noreferrer" href="mailto:hi@fneira.dev" aria-label="email"> <svg width="24" height="24" viewBox="0 0 20 20" class="h-8 w-8 dark:hover:text-primary-400 dark:text-gray-200 fill-current hover:text-primary-500 text-gray-700" data-icon="email">  <symbol id="ai:local:email"><path fill="currentColor" d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884"></path><path fill="currentColor" d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2z"></path></symbol><use xlink:href="#ai:local:email"></use>  </svg> </a><a class="text-sm transition hover:text-gray-600 text-gray-500" target="_blank" rel="noopener noreferrer" href="https://github.com/fneiraj" aria-label="github"> <svg width="24" height="24" viewBox="0 0 24 24" class="h-8 w-8 dark:hover:text-primary-400 dark:text-gray-200 fill-current hover:text-primary-500 text-gray-700" data-icon="github">  <use xlink:href="#ai:local:github"></use>  </svg> </a><a class="text-sm transition hover:text-gray-600 text-gray-500" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/fneiraj" aria-label="linkedin"> <svg width="24" height="24" viewBox="0 0 24 24" class="h-8 w-8 dark:hover:text-primary-400 dark:text-gray-200 fill-current hover:text-primary-500 text-gray-700" data-icon="linkedin">  <symbol id="ai:local:linkedin"><path fill="currentColor" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.06 2.06 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065m1.782 13.019H3.555V9h3.564zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0z"></path></symbol><use xlink:href="#ai:local:linkedin"></use>  </svg> </a> </div> <div class="text-sm text-gray-500 dark:text-gray-400 flex mb-2 space-x-2"> <div>Fernando Neira</div> <div> ‚Ä¢ </div> <div>¬© 2024</div> <div> ‚Ä¢ </div> <a href="/">fneira.dev</a> </div> <div class="text-sm flex mb-2 space-x-2 dark:hover:text-primary-400 dark:text-gray-200 hover:text-primary-500 items-center text-gray-700"> <svg width="14" height="14" viewBox="0 0 24 24" data-icon="github">  <symbol id="ai:local:github"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></symbol><use xlink:href="#ai:local:github"></use>  </svg> <a href="https://github.com/fneiraj/blog" target="_blank">Source code</a> </div> </div> </footer> </div>  <script>function createProgressBar(){const e=document.createElement("div");e.className="progress-container fixed top-0 z-10 h-1 w-full bg-skin-fill";const o=document.createElement("div");o.className="progress-bar h-1 w-0 bg-primary-500",o.id="progress-bar",e.appendChild(o),document.body.appendChild(e)}createProgressBar();function updateScrollProgress(){const e=document.body.scrollTop||document.documentElement.scrollTop,o=document.documentElement.scrollHeight-document.documentElement.clientHeight,n=e/o*100;if(document){const t=document.getElementById("progress-bar");t&&(t.style.width=n+"%")}}document.addEventListener("scroll",updateScrollProgress);
</script></body></html>